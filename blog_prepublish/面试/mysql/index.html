<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Mysql知识 | luolin1024</title><meta name=keywords content="面试"><meta name=description content="Mysql 事务 事务的特性ACID 隔离级别 产生死锁的四个必要条件： （1） 互斥条件：一个资源每次只能被一个进程使用。 （2） 请求与保持条件：一个进程因请求"><meta name=author content="luolin"><link rel=canonical href=https://luolin1024.github.io/blog_prepublish/%E9%9D%A2%E8%AF%95/mysql/><script defer src=https://blogcounter.luolin.us.kg/script.js data-website-id=c8850e2c-16aa-465e-aa6f-5392c9397317></script>
<script src=/js/umami-stats.js></script>
<script src=https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css><script src=https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js></script>
<link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://luolin1024.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://luolin1024.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://luolin1024.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://luolin1024.github.io/apple-touch-icon.png><link rel=mask-icon href=https://luolin1024.github.io/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><html><head><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/jetbrains-mono@1.0.6/css/jetbrains-mono.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lxgw-wenkai-lite-webfont@1.1.0/style.css><link rel=stylesheet href=https://cdn.staticfile.org/lxgw-wenkai-screen-webfont/1.6.0/style.css><style>body{font-family:lxgw wenkai lite,sans-serif;font-family:lxgw wenkai screen,sans-serif}</style></head></html><meta property="og:title" content="Mysql知识"><meta property="og:description" content="Mysql 事务 事务的特性ACID 隔离级别 产生死锁的四个必要条件： （1） 互斥条件：一个资源每次只能被一个进程使用。 （2） 请求与保持条件：一个进程因请求"><meta property="og:type" content="article"><meta property="og:url" content="https://luolin1024.github.io/blog_prepublish/%E9%9D%A2%E8%AF%95/mysql/"><meta property="article:section" content="blog_prepublish"><meta property="article:published_time" content="2023-12-06T15:24:59+08:00"><meta property="article:modified_time" content="2024-03-21T00:55:34+08:00"><meta property="og:site_name" content="luolin的博客"><meta name=twitter:card content="summary"><meta name=twitter:title content="Mysql知识"><meta name=twitter:description content="Mysql 事务 事务的特性ACID 隔离级别 产生死锁的四个必要条件： （1） 互斥条件：一个资源每次只能被一个进程使用。 （2） 请求与保持条件：一个进程因请求"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blog_prepublishes","item":"https://luolin1024.github.io/blog_prepublish/"},{"@type":"ListItem","position":2,"name":"Mysql知识","item":"https://luolin1024.github.io/blog_prepublish/%E9%9D%A2%E8%AF%95/mysql/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Mysql知识","name":"Mysql知识","description":"Mysql 事务 事务的特性ACID 隔离级别 产生死锁的四个必要条件： （1） 互斥条件：一个资源每次只能被一个进程使用。 （2） 请求与保持条件：一个进程因请求","keywords":["面试"],"articleBody":"Mysql 事务 事务的特性ACID 隔离级别 产生死锁的四个必要条件： （1） 互斥条件：一个资源每次只能被一个进程使用。 （2） 请求与保持条件：一个进程因请求资源而阻塞时，对已获得的资源保持不放。 （3） 不剥夺条件:进程已获得的资源，在末使用完之前，不能强行剥夺。 （4） 循环等待条件:若干进程之间形成一种头尾相接的循环等待资源关系。\n索引 索引的类别 Primary Key（聚集索引）：InnoDB存储引擎的表会存在主键（唯一非null），如果建表的时候没有指定主键，则会使用第一非空的唯一索引作为聚集索引，否则InnoDB会自动帮你创建一个不可见的、长度为6字节的row_id用来作为聚集索引。 单列索引：单列索引即一个索引只包含单个列 组合索引：组合索引指在表的多个字段组合上创建的索引，只有在查询条件中使用了这些字段的左边字段时，索引才会被使用。使用组合索引时遵循最左前缀集合 Unique（唯一索引）：索引列的值必须唯一，但允许有空值。若是组合索引，则列值的组合必须唯一。主键索引是一种特殊的唯一索引，不允许有空值 Key（普通索引）：是MySQL中的基本索引类型，允许在定义索引的列中插入重复值和空值 FULLTEXT（全文索引）：全文索引类型为FULLTEXT，在定义索引的列上支持值的全文查找，允许在这些索引列中插入重复值和空值。全文索引可以在CHAR、VARCHAR或者TEXT类型的列上创建 SPATIAL（空间索引）：空间索引是对空间数据类型的字段建立的索引，MySQL中的空间数据类型有4种，分别是GEOMETRY、POINT、LINESTRING和POLYGON。MySQL使用SPATIAL关键字进行扩展，使得能够用于创建正规索引类似的语法创建空间索引。创建空间索引的列必须声明为NOT NULL 索引的优缺点 优点 使用索引可以大大加快 数据的检索速度（大大减少检索的数据量）, 这也是创建索引的最主要的原因。 通过创建唯一性索引，可以保证数据库表中每一行数据的唯一性。 缺点 创建索引和维护索引需要耗费许多时间。当对表中的数据进行增删改的时候，如果数据有索引，那么索引也需要动态的修改，会降低 SQL 执行效率。 索引需要使用物理文件存储，也会耗费一定空间。 索引的底层数据结构 Hash表 通过键(key)即可快速取出对应的值(value)，因此哈希表可以快速检索数据（接近 O（1））。 B+树 多路平衡查找树 ，B+ 树是 B 树的一种变体。B 树和 B+树中的 B 是 Balanced （平衡）的意思。 B 树\u0026 B+树两者有何异同呢？ B 树的所有节点既存放键(key) 也存放 数据(data)，而 B+树只有叶子节点存放 key 和 data，其他内节点只存放 key。 B 树的叶子节点都是独立的;B+树的叶子节点有一条引用链指向与它相邻的叶子节点。 B 树的检索的过程相当于对范围内的每个节点的关键字做二分查找，可能还没有到达叶子节点，检索就结束了。而 B+树的检索效率就很稳定了，任何查找都是从根节点到叶子节点的过程，叶子节点的顺序检索很明显。 性能优化 执行计划\nid\tSELECT查询的序列标识符；id越大的越先执行，相同id大小时从上到下执行 select_type\tSELECT关键字对应的查询类型； table\t用到的表名 partitions\t匹配的分区，对于未分区的表，值为 NULL type\t表的访问方法；描述了查询是如何执行的。所有值的顺序从最优到最差排序为：system \u003e const \u003e eq_ref \u003e ref \u003e fulltext \u003e ref_or_null \u003e index_merge \u003e unique_subquery \u003e index_subquery \u003e range \u003e index \u003e ALL possible_keys\t可能用到的索引； MySQL 执行查询时可能用到的索引。如果这一列为 NULL ，则表示没有可能用到的索引 key\t实际用到的索引；列表示 MySQL 实际使用到的索引。如果为 NULL，则表示未用到索引。 key_len\t所选索引的长度 ref\t当使用索引等值查询时，与索引作比较的列或常量； rows\t预计要读取的行数；数值越小越好。 filtered\t按表条件过滤后，留存的记录数的百分比；一般越高越好 Extra\t附加信息； Using filesort：在排序时使用了外部的索引排序，没有用到表内索引进行排序。 Using temporary：MySQL 需要创建临时表来存储查询的结果，常见于 ORDER BY 和 GROUP BY。 Using index：表明查询使用了覆盖索引，不用回表，查询效率非常高。 Using index condition：表示查询优化器选择使用了索引条件下推这个特性。 Using where：表明查询使用了 WHERE 子句进行条件过滤。一般在没有使用到索引的时候会出现。 Using join buffer (Block Nested Loop)：连表查询的方式，表示当被驱动表的没有使用索引的时候，MySQL 会先将驱动表读出来放到 join buffer 中，再遍历被驱动表与驱动表进行查询。 当 Extra 列包含 Using filesort 或 Using temporary 时，MySQL 的性能可能会存在问题，需要尽可能避免。 行锁\u0026表锁 MySQL三大日志(binlog、redo log和undo log) MySql Mvcc MVCC的机制？ MVCC怎么解决幻读问题的？ 临键锁的范围是怎么确定的？\n索引的基本原理 Mysql聚簇和非聚簇索引的区别 Mysql索引的数据结构，各自优劣 索引设计的原则？ InnoDB存储引擎的锁的算法 关心过业务系统里面的sql耗时吗？统计过慢查询吗？对慢查询都怎 么优化过？ 事务的基本特性和隔离级别 什么是MVCC 分表后非sharding key的查询怎么处理，分表后的排序？ Mysql主从同步原理 简述MyISAM和InnoDB的区别 简述Mysql中索引类型及对数据库的性能的影响 Explain语句结果中各个字段分表表示什么 索引覆盖是什么 最左前缀原则是什么 Innodb是如何实现事务的 B树和B+树的区别，为什么Mysql使用B+树 Mysql锁有哪些，如何理解 Mysql慢查询该如何优化？ ","wordCount":"2210","inLanguage":"en","datePublished":"2023-12-06T15:24:59+08:00","dateModified":"2024-03-21T00:55:34+08:00","author":{"@type":"Person","name":"luolin"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://luolin1024.github.io/blog_prepublish/%E9%9D%A2%E8%AF%95/mysql/"},"publisher":{"@type":"Organization","name":"luolin1024","logo":{"@type":"ImageObject","url":"https://luolin1024.github.io/favicon.ico"}}}</script></head><body id=top><script>window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://luolin1024.github.io accesskey=h title="luolin的博客 (Alt + H)">luolin的博客</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://luolin1024.github.io/posts title=📚文章><span>📚文章</span></a></li><li><a href=https://luolin1024.github.io/archives/ title=⏱时间轴><span>⏱时间轴</span></a></li><li><a href=https://luolin1024.github.io/search/ title="🔍搜索 (Alt + /)" accesskey=/><span>🔍搜索</span></a></li><li><a href=https://luolin1024.github.io/tags title=🔖标签><span>🔖标签</span></a></li><li><a href=https://luolin1024.github.io/about title=🙋🏻‍♂️关于><span>🙋🏻‍♂️关于</span></a></li><li><a href=https://luolin1024.github.io/links title=🤝友链><span>🤝友链</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://luolin1024.github.io>Home</a>&nbsp;»&nbsp;<a href=https://luolin1024.github.io/blog_prepublish/>Blog_prepublishes</a></div><h1 class="post-title entry-hint-parent">Mysql知识</h1><div class=post-meta><span title='2023-12-06 15:24:59 +0800 +0800'>2023-12-06</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;2210 words&nbsp;·&nbsp;luolin
本文总阅读量 <span id=umami_value_page_pv></span> 次
本文总访客量 <span id=umami_value_page_uv></span> 人</div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#mysql aria-label=Mysql>Mysql</a><ul><li><a href=#%e4%ba%8b%e5%8a%a1 aria-label=事务>事务</a></li><li><a href=#%e9%9a%94%e7%a6%bb%e7%ba%a7%e5%88%ab aria-label=隔离级别>隔离级别</a></li><li><a href=#%e4%ba%a7%e7%94%9f%e6%ad%bb%e9%94%81%e7%9a%84%e5%9b%9b%e4%b8%aa%e5%bf%85%e8%a6%81%e6%9d%a1%e4%bb%b6 aria-label=产生死锁的四个必要条件：>产生死锁的四个必要条件：</a></li><li><a href=#%e7%b4%a2%e5%bc%95 aria-label=索引>索引</a><ul><li><a href=#%e7%b4%a2%e5%bc%95%e7%9a%84%e7%b1%bb%e5%88%ab aria-label=索引的类别>索引的类别</a></li><li><a href=#%e7%b4%a2%e5%bc%95%e7%9a%84%e4%bc%98%e7%bc%ba%e7%82%b9 aria-label=索引的优缺点>索引的优缺点</a></li><li><a href=#%e7%b4%a2%e5%bc%95%e7%9a%84%e5%ba%95%e5%b1%82%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84 aria-label=索引的底层数据结构>索引的底层数据结构</a></li><li><a href=#%e6%80%a7%e8%83%bd%e4%bc%98%e5%8c%96 aria-label=性能优化>性能优化</a></li></ul></li><li><a href=#%e8%a1%8c%e9%94%81%e8%a1%a8%e9%94%81 aria-label=行锁&amp;amp;表锁>行锁&表锁</a></li><li><a href=#mysql%e4%b8%89%e5%a4%a7%e6%97%a5%e5%bf%97binlogredo-log%e5%92%8cundo-log aria-label="MySQL三大日志(binlog、redo log和undo log)">MySQL三大日志(binlog、redo log和undo log)</a></li><li><a href=#mysql-mvcc aria-label="MySql Mvcc">MySql Mvcc</a></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h2 id=mysql>Mysql<a hidden class=anchor aria-hidden=true href=#mysql>#</a></h2><h3 id=事务>事务<a hidden class=anchor aria-hidden=true href=#事务>#</a></h3><ul><li>事务的特性ACID</li></ul><h3 id=隔离级别>隔离级别<a hidden class=anchor aria-hidden=true href=#隔离级别>#</a></h3><p><div class=post-img-view><a data-fancybox=gallery href=https://cdn.jsdelivr.net/gh/luolin1024/image@main/img/20230906160920.png><img src=https://cdn.jsdelivr.net/gh/luolin1024/image@main/img/20230906160920.png alt=image.png></a></div></p><h3 id=产生死锁的四个必要条件>产生死锁的四个必要条件：<a hidden class=anchor aria-hidden=true href=#产生死锁的四个必要条件>#</a></h3><p>（1） 互斥条件：一个资源每次只能被一个进程使用。
（2） 请求与保持条件：一个进程因请求资源而阻塞时，对已获得的资源保持不放。
（3） 不剥夺条件:进程已获得的资源，在末使用完之前，不能强行剥夺。
（4） 循环等待条件:若干进程之间形成一种头尾相接的循环等待资源关系。</p><h3 id=索引>索引<a hidden class=anchor aria-hidden=true href=#索引>#</a></h3><h4 id=索引的类别>索引的类别<a hidden class=anchor aria-hidden=true href=#索引的类别>#</a></h4><ol><li><strong>Primary Key（聚集索引）</strong>：InnoDB存储引擎的表会存在主键（唯一非null），如果建表的时候没有指定主键，则会使用第一非空的唯一索引作为聚集索引，否则InnoDB会自动帮你创建一个不可见的、长度为6字节的row_id用来作为聚集索引。</li><li><strong>单列索引</strong>：单列索引即一个索引只包含单个列</li><li><strong>组合索引</strong>：组合索引指在表的多个字段组合上创建的索引，只有在查询条件中使用了这些字段的左边字段时，索引才会被使用。使用组合索引时<strong>遵循最左前缀集合</strong></li><li><strong>Unique（唯一索引）</strong>：索引列的值必须唯一，但允许有空值。若是组合索引，则列值的组合必须唯一。主键索引是一种特殊的唯一索引，不允许有空值</li><li><strong>Key（普通索引）</strong>：是MySQL中的基本索引类型，允许在定义索引的列中插入重复值和空值</li><li><strong>FULLTEXT（全文索引）</strong>：全文索引类型为FULLTEXT，在定义索引的列上支持值的全文查找，允许在这些索引列中插入重复值和空值。全文索引可以在CHAR、VARCHAR或者TEXT类型的列上创建</li><li><strong>SPATIAL（空间索引）</strong>：空间索引是对空间数据类型的字段建立的索引，MySQL中的空间数据类型有4种，分别是GEOMETRY、POINT、LINESTRING和POLYGON。MySQL使用SPATIAL关键字进行扩展，使得能够用于创建正规索引类似的语法创建空间索引。创建空间索引的列必须声明为NOT NULL</li></ol><h4 id=索引的优缺点>索引的优缺点<a hidden class=anchor aria-hidden=true href=#索引的优缺点>#</a></h4><ul><li>优点<ul><li>使用索引可以大大加快 数据的检索速度（大大减少检索的数据量）, 这也是创建索引的最主要的原因。</li><li>通过创建唯一性索引，可以保证数据库表中每一行数据的唯一性。</li></ul></li><li>缺点<ul><li>创建索引和维护索引需要耗费许多时间。当对表中的数据进行增删改的时候，如果数据有索引，那么索引也需要动态的修改，会降低 SQL 执行效率。</li><li>索引需要使用物理文件存储，也会耗费一定空间。</li></ul></li></ul><h4 id=索引的底层数据结构>索引的底层数据结构<a hidden class=anchor aria-hidden=true href=#索引的底层数据结构>#</a></h4><ul><li>Hash表<ul><li>通过键(key)即可快速取出对应的值(value)，因此哈希表可以快速检索数据（接近 O（1））。</li></ul></li><li>B+树<ul><li>多路平衡查找树 ，B+ 树是 B 树的一种变体。B 树和 B+树中的 B 是 Balanced （平衡）的意思。</li><li>B 树& B+树两者有何异同呢？<ul><li>B 树的所有节点既存放键(key) 也存放 数据(data)，而 B+树只有叶子节点存放 key 和 data，其他内节点只存放 key。</li><li>B 树的叶子节点都是独立的;B+树的叶子节点有一条引用链指向与它相邻的叶子节点。</li><li>B 树的检索的过程相当于对范围内的每个节点的关键字做二分查找，可能还没有到达叶子节点，检索就结束了。而 B+树的检索效率就很稳定了，任何查找都是从根节点到叶子节点的过程，叶子节点的顺序检索很明显。</li></ul></li></ul></li></ul><h4 id=性能优化>性能优化<a hidden class=anchor aria-hidden=true href=#性能优化>#</a></h4><p>执行计划</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=n>id</span><span class=w>	</span><span class=n>SELECT</span><span class=err>查询的序列标识符；</span><span class=n>id</span><span class=err>越大的越先执行，相同</span><span class=n>id</span><span class=err>大小时从上到下执行</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>select_type</span><span class=w>	</span><span class=n>SELECT</span><span class=err>关键字对应的查询类型；</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>table</span><span class=w>	</span><span class=err>用到的表名</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>partitions</span><span class=w>	</span><span class=err>匹配的分区，对于未分区的表，值为</span><span class=w> </span><span class=k>NULL</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>type</span><span class=w>	</span><span class=err>表的访问方法；描述了查询是如何执行的。所有值的顺序从最优到最差排序为：</span><span class=k>system</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>const</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>eq_ref</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=k>ref</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>fulltext</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>ref_or_null</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>index_merge</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>unique_subquery</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>index_subquery</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=n>range</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=k>index</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=k>ALL</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>possible_keys</span><span class=w>	</span><span class=err>可能用到的索引；</span><span class=w> </span><span class=n>MySQL</span><span class=w> </span><span class=err>执行查询时可能用到的索引。如果这一列为</span><span class=w> </span><span class=k>NULL</span><span class=w> </span><span class=err>，则表示没有可能用到的索引</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>key</span><span class=w>	</span><span class=err>实际用到的索引；列表示</span><span class=w> </span><span class=n>MySQL</span><span class=w> </span><span class=err>实际使用到的索引。如果为</span><span class=w> </span><span class=k>NULL</span><span class=err>，则表示未用到索引。</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>key_len</span><span class=w>	</span><span class=err>所选索引的长度</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ref</span><span class=w>	</span><span class=err>当使用索引等值查询时，与索引作比较的列或常量；</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>rows</span><span class=w>	</span><span class=err>预计要读取的行数；数值越小越好。</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>filtered</span><span class=w>	</span><span class=err>按表条件过滤后，留存的记录数的百分比；一般越高越好</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Extra</span><span class=w>	</span><span class=err>附加信息；</span><span class=w> 
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>Using</span><span class=w> </span><span class=n>filesort</span><span class=err>：在排序时使用了外部的索引排序，没有用到表内索引进行排序。</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>Using</span><span class=w> </span><span class=k>temporary</span><span class=err>：</span><span class=n>MySQL</span><span class=w> </span><span class=err>需要创建临时表来存储查询的结果，常见于</span><span class=w> </span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=err>和</span><span class=w> </span><span class=k>GROUP</span><span class=w> </span><span class=k>BY</span><span class=err>。</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>Using</span><span class=w> </span><span class=k>index</span><span class=err>：表明查询使用了覆盖索引，不用回表，查询效率非常高。</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>Using</span><span class=w> </span><span class=k>index</span><span class=w> </span><span class=n>condition</span><span class=err>：表示查询优化器选择使用了索引条件下推这个特性。</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>Using</span><span class=w> </span><span class=k>where</span><span class=err>：表明查询使用了</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=err>子句进行条件过滤。一般在没有使用到索引的时候会出现。</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>Using</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>buffer</span><span class=w> </span><span class=p>(</span><span class=n>Block</span><span class=w> </span><span class=n>Nested</span><span class=w> </span><span class=n>Loop</span><span class=p>)</span><span class=err>：连表查询的方式，表示当被驱动表的没有使用索引的时候，</span><span class=n>MySQL</span><span class=w> </span><span class=err>会先将驱动表读出来放到</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>buffer</span><span class=w> </span><span class=err>中，再遍历被驱动表与驱动表进行查询。</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=err>当</span><span class=w> </span><span class=n>Extra</span><span class=w> </span><span class=err>列包含</span><span class=w> </span><span class=k>Using</span><span class=w> </span><span class=n>filesort</span><span class=w> </span><span class=err>或</span><span class=w> </span><span class=k>Using</span><span class=w> </span><span class=k>temporary</span><span class=w> </span><span class=err>时，</span><span class=n>MySQL</span><span class=w> </span><span class=err>的性能可能会存在问题，需要尽可能避免。</span><span class=w>
</span></span></span></code></pre></div><h3 id=行锁表锁>行锁&表锁<a hidden class=anchor aria-hidden=true href=#行锁表锁>#</a></h3><p><div class=post-img-view><a data-fancybox=gallery href=https://cdn.jsdelivr.net/gh/luolin1024/image@main/img/20230906161628.png><img src=https://cdn.jsdelivr.net/gh/luolin1024/image@main/img/20230906161628.png alt=image.png></a></div></p><h3 id=mysql三大日志binlogredo-log和undo-log>MySQL三大日志(binlog、redo log和undo log)<a hidden class=anchor aria-hidden=true href=#mysql三大日志binlogredo-log和undo-log>#</a></h3><h3 id=mysql-mvcc>MySql Mvcc<a hidden class=anchor aria-hidden=true href=#mysql-mvcc>#</a></h3><p>MVCC的机制？
MVCC怎么解决幻读问题的？
临键锁的范围是怎么确定的？</p><ol><li>索引的基本原理</li><li>Mysql聚簇和非聚簇索引的区别</li><li>Mysql索引的数据结构，各自优劣</li><li>索引设计的原则？</li><li>InnoDB存储引擎的锁的算法</li><li>关心过业务系统里面的sql耗时吗？统计过慢查询吗？对慢查询都怎</li><li>么优化过？</li><li>事务的基本特性和隔离级别</li><li>什么是MVCC</li><li>分表后非sharding key的查询怎么处理，分表后的排序？</li><li>Mysql主从同步原理</li><li>简述MyISAM和InnoDB的区别</li><li>简述Mysql中索引类型及对数据库的性能的影响</li><li>Explain语句结果中各个字段分表表示什么</li><li>索引覆盖是什么</li><li>最左前缀原则是什么</li><li>Innodb是如何实现事务的</li><li>B树和B+树的区别，为什么Mysql使用B+树</li><li>Mysql锁有哪些，如何理解</li><li>Mysql慢查询该如何优化？</li></ol></div><footer class=post-footer><ul class=post-tags><li><a href=https://luolin1024.github.io/tags/%E9%9D%A2%E8%AF%95/>面试</a></li></ul><nav class=paginav><a class=prev href=https://luolin1024.github.io/blog_prepublish/%E9%9D%A2%E8%AF%95/mybatis/><span class=title>« Prev</span><br><span>MyBatis知识</span></a>
<a class=next href=https://luolin1024.github.io/blog_prepublish/%E9%9D%A2%E8%AF%95/java/><span class=title>Next »</span><br><span>Java知识</span></a></nav><div class=related-posts><h2>相关文章</h2><ul><li>· <a href=/blog_prepublish/%E9%9D%A2%E8%AF%95/spring/>Spring知识</a></li><li>· <a href=/blog_prepublish/%E9%9D%A2%E8%AF%95/%E7%BC%93%E5%AD%98/>缓存知识</a></li><li>· <a href=/blog_prepublish/%E9%9D%A2%E8%AF%95/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/>消息队列知识</a></li><li>· <a href=/blog_prepublish/%E9%9D%A2%E8%AF%95/mybatis/>MyBatis知识</a></li><li>· <a href=/blog_prepublish/%E9%9D%A2%E8%AF%95/java/>Java知识</a></li></ul></div></footer><link rel=stylesheet href=https://unpkg.com/@waline/client@v2/dist/waline.css><div id=waline></div><script type=module>
    import { init } from 'https://unpkg.com/@waline/client@v2/dist/waline.mjs';
    const locale = {
        nick: '昵称',
        nickError: '请填写昵称',
        mail: '邮箱',
        mailError: '请填写正确的邮件地址',
        link: '网址',
        optional: '可选',
        placeholder: '仅填写昵称即可发表回复。\n填写邮箱可收到回复提醒。\n评论区支持 Markdown 语法及预览。\n',
        sofa: '来发评论吧~',
        submit: '提交',
        like: '喜欢',
        cancelLike: '取消喜欢',
        reply: '回复',
        cancelReply: '取消回复',
        comment: '评论',
        refresh: '刷新',
        more: '加载更多...',
        preview: '预览',
        emoji: '表情',
        uploadImage: '上传图片',
        seconds: '秒前',
        minutes: '分钟前',
        hours: '小时前',
        days: '天前',
        now: '刚刚',
        uploading: '正在上传',
        login: '管理',
        logout: '退出',
        admin: '博主',
        sticky: '置顶',
        word: '字',
        wordHint: '评论字数应在 $0 到 $1 字之间！\n当前字数：$2',
        anonymous: '匿名',
        level0: '潜水',
        level1: '冒泡',
        level2: '吐槽',
        level3: '活跃',
        level4: '话痨',
        level5: '传说',
        gif: '表情包',
        gifSearchPlaceholder: '搜索表情包',
        profile: '个人资料',
        approved: '通过',
        waiting: '待审核',
        spam: '垃圾',
        unsticky: '取消置顶',
        oldest: '按倒序',
        latest: '按正序',
        hottest: '按热度',
        reactionTitle: '你认为这篇文章怎么样？',
    };
    init({
        
        el: '#waline',
        serverURL: 'https://blogcomments.luolin.online',
        locale,
        emoji: false,     
        search: false,    
        reaction: false,  
        requiredMeta: ['nick'],
        pageSize: 10,
        imageUploader: false,
        copyright: true,
        pageview: true,
        like: false,
    });
</script></article></main><footer class=footer><span>&copy; 2025 <a href=https://luolin1024.github.io>luolin1024</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span><div>本站总访问量 <span id=umami_value_site_pv></span> 次
本站总访客数 <span id=umami_value_site_uv></span> 人
当前在线访客 <span id=umami_value_active_uv></span> 人</div><a href="https://icp.gov.moe/?keyword=20248618" target=_blank>萌ICP备20248618号</a></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>