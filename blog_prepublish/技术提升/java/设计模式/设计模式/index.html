<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>设计模式 | luolin1024</title><meta name=keywords content="Java/设计模式"><meta name=description content="Java设计模式概述 设计模式（Design pattern）是软件开发人员在软件开发过程中面临的一般问题的解决方案模板，这些模板是经过相当长的"><meta name=author content="luolin"><link rel=canonical href=https://luolin1024.github.io/blog_prepublish/%E6%8A%80%E6%9C%AF%E6%8F%90%E5%8D%87/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/><script defer src=https://blogcounter.luolin.us.kg/script.js data-website-id=c8850e2c-16aa-465e-aa6f-5392c9397317></script>
<script src=/js/umami-stats.js></script>
<script src=https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css><script src=https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js></script>
<link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://luolin1024.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://luolin1024.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://luolin1024.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://luolin1024.github.io/apple-touch-icon.png><link rel=mask-icon href=https://luolin1024.github.io/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><html><head><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/jetbrains-mono@1.0.6/css/jetbrains-mono.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lxgw-wenkai-lite-webfont@1.1.0/style.css><link rel=stylesheet href=https://cdn.staticfile.org/lxgw-wenkai-screen-webfont/1.6.0/style.css><style>body{font-family:lxgw wenkai lite,sans-serif;font-family:lxgw wenkai screen,sans-serif}</style></head></html><meta property="og:title" content="设计模式"><meta property="og:description" content="Java设计模式概述 设计模式（Design pattern）是软件开发人员在软件开发过程中面临的一般问题的解决方案模板，这些模板是经过相当长的"><meta property="og:type" content="article"><meta property="og:url" content="https://luolin1024.github.io/blog_prepublish/%E6%8A%80%E6%9C%AF%E6%8F%90%E5%8D%87/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"><meta property="article:section" content="blog_prepublish"><meta property="article:published_time" content="2023-02-13T12:43:48+08:00"><meta property="article:modified_time" content="2024-05-20T13:32:09+08:00"><meta property="og:site_name" content="luolin的博客"><meta name=twitter:card content="summary"><meta name=twitter:title content="设计模式"><meta name=twitter:description content="Java设计模式概述 设计模式（Design pattern）是软件开发人员在软件开发过程中面临的一般问题的解决方案模板，这些模板是经过相当长的"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blog_prepublishes","item":"https://luolin1024.github.io/blog_prepublish/"},{"@type":"ListItem","position":2,"name":"设计模式","item":"https://luolin1024.github.io/blog_prepublish/%E6%8A%80%E6%9C%AF%E6%8F%90%E5%8D%87/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"设计模式","name":"设计模式","description":"Java设计模式概述 设计模式（Design pattern）是软件开发人员在软件开发过程中面临的一般问题的解决方案模板，这些模板是经过相当长的","keywords":["Java/设计模式"],"articleBody":"Java设计模式概述 设计模式（Design pattern）是软件开发人员在软件开发过程中面临的一般问题的解决方案模板，这些模板是经过相当长的一段时间的试验和错误总结出来的。 为什么要使用设计模式？ 使用设计模式是为了重用代码、提高代码的可读性和可靠性。 在项目中合理地运用设计模式可以完美地解决很多问题，每种模式在现实中都有相应的原理来与之对应，每种模式都描述了一个在我们周围不断重复发生的问题，以及该问题的核心解决方案。 常见的设计模式分为三大类：创建型模式、结构型模式和行为型模式。\n设计模式的六大原则 1、开闭原则（Open Close Principle）\n开闭原则的意思是：对扩展开放，对修改关闭。在程序需要进行拓展的时候，不能去修改原有的代码，实现一个热插拔的效果。简言之，是为了使程序的扩展性好，易于维护和升级。想要达到这样的效果，我们需要使用接口和抽象类，后面的具体设计中我们会提到这点。\n2、里氏代换原则（Liskov Substitution Principle）\n里氏代换原则是面向对象设计的基本原则之一。 里氏代换原则中说，任何基类可以出现的地方，子类一定可以出现。LSP 是继承复用的基石，只有当派生类可以替换掉基类，且软件单位的功能不受到影响时，基类才能真正被复用，而派生类也能够在基类的基础上增加新的行为。里氏代换原则是对开闭原则的补充。实现开闭原则的关键步骤就是抽象化，而基类与子类的继承关系就是抽象化的具体实现，所以里氏代换原则是对实现抽象化的具体步骤的规范。\n3、依赖倒转原则（Dependence Inversion Principle）\n这个原则是开闭原则的基础，具体内容：针对接口编程，依赖于抽象而不依赖于具体。\n4、接口隔离原则（Interface Segregation Principle）\n这个原则的意思是：使用多个隔离的接口，比使用单个接口要好。它还有另外一个意思是：降低类之间的耦合度。由此可见，其实设计模式就是从大型软件架构出发、便于升级和维护的软件设计思想，它强调降低依赖，降低耦合。\n5、迪米特法则，又称最少知道原则（Demeter Principle）\n最少知道原则是指：一个实体应当尽量少地与其他实体之间发生相互作用，使得系统功能模块相对独立。\n6、合成复用原则（Composite Reuse Principle）\n合成复用原则是指：尽量使用合成/聚合的方式，而不是使用继承。\n创建型模式（Creational Patterns） 创建型模式提供了一种在创建对象的同时隐藏创建逻辑的方式，而不是使用 new 运算符直接实例化对象。这使得程序在判断针对某个给定实例需要创建哪些对象时更加灵活。\n单例模式（Singleton Pattern）\n适用场景：需要确保某一个类只有一个实例，且自行实例化并向整个系统提供这个实例。 示例：数据库连接池、配置文件读取类。 工厂方法模式（Factory Method Pattern）\n适用场景：定义一个创建对象的接口，但由子类决定要实例化的类是哪一个。工厂方法使一个类的实例化延迟到其子类。 示例：日志记录器、读取不同类型文件的解析器。 抽象工厂模式（Abstract Factory Pattern）\n适用场景：提供一个创建一系列相关或互相依赖对象的接口，而无需指定它们具体的类。 示例：GUI工具包中的按钮、文本框、菜单等。 建造者模式（Builder Pattern）\n适用场景：将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示。 示例：构建复杂对象如文档、计算机硬件配置。 原型模式（Prototype Pattern）\n适用场景：用原型实例指定创建对象的种类，并且通过拷贝这些原型创建新的对象。 示例：对象复制、需要大量相似对象的创建。 结构型模式（Structural Patterns） 结构型模式设计模式关注类和对象的组合。继承的概念被用来组合接口和定义组合对象获得新功能的方式。\n适配器模式（Adapter Pattern）\n适用场景：将一个类的接口转换成客户希望的另一个接口，使得原本由于接口不兼容而不能一起工作的那些类可以一起工作。 示例：旧系统与新系统的集成。 桥接模式（Bridge Pattern）\n适用场景：将抽象部分与它的实现部分分离，使它们都可以独立地变化。 示例：图形绘制程序中的形状和颜色分离。 组合模式（Composite Pattern）\n适用场景：将对象组合成树形结构以表示“部分-整体”的层次结构，使得用户对单个对象和组合对象的使用具有一致性。 示例：文件系统中的文件和文件夹。 装饰器模式（Decorator Pattern）\n适用场景：动态地给一个对象添加一些额外的职责，就增加功能来说，装饰模式比生成子类更为灵活。 示例：流处理中的BufferedReader和BufferedWriter。 外观模式（Facade Pattern）\n适用场景：为子系统中的一组接口提供一个一致的界面，使得子系统更加容易使用。 示例：简化复杂系统的接口，如简化的数据库接口。 享元模式（Flyweight Pattern）\n适用场景：运用共享技术有效地支持大量细粒度对象的复用。 示例：文本编辑器中的字符对象管理。 代理模式（Proxy Pattern）\n适用场景：为其他对象提供一种代理以控制对这个对象的访问。 示例：虚拟代理、远程代理、保护代理。 行为型模式（Behavioral Patterns） 行为型设计模式特别关注对象之间的通信。\n责任链模式（Chain of Responsibility Pattern）\n适用场景：为请求创建一个接收对象的链，这样多个对象都有机会处理请求，避免请求的发送者和接收者之间的耦合。 示例：事务处理中的审批流程。 命令模式（Command Pattern）\n适用场景：将请求封装成对象，从而使你可以用不同的请求对客户进行参数化；对请求排队或者记录请求日志，以及支持可撤销的操作。 示例：菜单命令、操作日志、撤销操作。 解释器模式（Interpreter Pattern）\n适用场景：给定一种语言，定义它的文法表示，并定义一个解释器，这个解释器使用该表示来解释语言中的句子。 示例：编译器、正则表达式处理。 迭代器模式（Iterator Pattern）\n适用场景：提供一种方法顺序访问一个聚合对象中的各个元素，而又不暴露其内部的表示。 示例：遍历集合对象，如列表、栈、队列等。 中介者模式（Mediator Pattern）\n适用场景：用一个中介对象来封装一系列对象的交互，使得这些对象不需要显式地相互引用，从而使它们可以松散耦合。 示例：聊天室中的消息传递。 备忘录模式（Memento Pattern）\n适用场景：在不破坏封装性的前提下，捕获一个对象的内部状态，并在该对象之外保存这个状态。 示例：撤销功能、历史记录。 观察者模式（Observer Pattern）\n适用场景：定义对象间的一种一对多的依赖关系，使得每当一个对象改变状态，则所有依赖于它的对象都会得到通知并被自动更新。 示例：事件监听机制。 状态模式（State Pattern）\n适用场景：允许对象在其内部状态改变时改变它的行为，对象看起来似乎修改了它的类。 示例：状态机实现、界面导航。 策略模式（Strategy Pattern）\n适用场景：定义一系列算法，把它们一个个封装起来，并且使它们可互相替换。本模式使得算法可独立于使用它的客户而变化。 示例：各种排序算法、支付方式选择。 模板方法模式（Template Method Pattern）\n适用场景：定义一个操作中的算法的骨架，而将一些步骤延迟到子类中。模板方法使得子类可以不改变一个算法的结构即可重新定义该算法的某些特定步骤。 示例：数据处理中的标准处理流程。 访问者模式（Visitor Pattern）\n适用场景：表示一个作用于某对象结构中的各元素的操作。它使你可以在不改变各元素类的前提下定义作用于这些元素的新操作。 示例：对象结构如文件系统中的文件和文件夹，编译器中的语法树。 创建型模式 工厂模式（Factory Pattern） 问题背景 假设你正在开发一款物流管理应用。 最初版本只能处理卡车运输， 因此大部分代码都在位于名为 卡车的类中。一段时间后， 这款应用变得极受欢迎，同时 你每天都能收到十几次来自海运公司的请求， 希望应用能够支持海上物流功能。 这可是个好消息。 但是代码问题该如何处理呢？目前， 大部分代码都与 卡车类相关。 在程序中添加 轮船类需要修改全部代码。 更糟糕的是， 如果你以后需要在程序中支持另外一种运输方式， 很可能需要再次对这些代码进行大幅修改。 最后， 你将不得不编写繁复的代码， 根据不同的运输对象类， 在应用中进行不同的处理。\n解决方案 工厂方法模式建议使用特殊的_工厂_方法代替对于对象构造函数的直接调用 （即使用 new运算符）。 不用担心， 对象仍将通过 new运算符创建， 只是该运算符改在工厂方法中调用罢了。 工厂方法返回的对象通常被称作 “产品”。\n乍看之下， 这种更改可能毫无意义： 我们只是改变了程序中调用构造函数的位置而已。 但是， 仔细想一下， 现在你可以在子类中重写工厂方法， 从而改变其创建产品的类型。 但有一点需要注意:仅当这些产品具有共同的基类或者接口时， 子类才能返回不同类型的产品， 同时基类中的工厂方法还应将其返回类型声明为这一共有接口。 举例来说， ​ 卡车Truck和 轮船Ship类都必须实现 运输Transport接口， 该接口声明了一个名为 deliver交付的方法。 每个类都将以不同的方式实现该方法： 卡车走陆路交付货物， 轮船走海路交付货物。 ​ 陆路运输Road­Logistics类中的工厂方法返回卡车对象， 而 海路运输Sea­Logistics类则返回轮船对象。\n工厂方法模式代码实现 // 工厂方法模式 package com.lin.factorypattern; public class FactoryMethodTest { public static void main(String[] args) { // 假设有4个订单,分别为卡车运输、卡车加速运输、海陆运输、海陆加速运输 Factory factory = new TruckFactory(); factory.deliver(); Factory factory2 = new ShipFactory(); factory.deliver(); Factory factory3 = new TruckFactory(); factory.speedDeliver(); Factory factory4 = new ShipFactory(); factory.speedDeliver(); } } /** * 通用产品接口 */ interface Transport{ void deliver(); void speedDeliver(); } /** * 具体产品:Truck */ class Truck implements Transport{ @Override public void deliver() { System.out.println(\"在盒子中以陆路运输。\"); } @Override public void speedDeliver() { System.out.println(\"卡车加速1倍运输。\"); } } /** * 具体产品:Ship */ class Ship implements Transport{ @Override public void deliver() { System.out.println(\"在集装箱中以海路运输。\"); } @Override public void speedDeliver() { System.out.println(\"ship 无法加速。以原速度运输\"); } } /** * 通用创建者（工厂） */ abstract class Factory{ public void deliver(){ Transport product = createProduct(); product.deliver(); } public void speedDeliver(){ Transport product = createProduct(); product.speedDeliver(); } protected abstract Transport createProduct(); } /** * 具体创建者:Truck */ class TruckFactory extends Factory { @Override protected Transport createProduct() { return new Truck(); } } /** * 具体创建者:Ship */ class ShipFactory extends Factory { @Override protected Transport createProduct() { return new Truck(); } } 简单工厂 简单工厂模式 描述了一个类， 它拥有一个包含大量条件语句的构建方法， 可根据方法的参数来选择对何种产品进行初始化并将其返回。 人们通常会将简单工厂与普通的工厂或其它创建型设计模式混淆。 在绝大多数情况下， 简单工厂是引入工厂方法或抽象工厂模式时的一个中间步骤。 简单工厂通常没有子类。 但当从一个简单工厂中抽取出子类后， 它看上去就会更像经典的工厂方法模式了。 顺便提一句， 如果你将一个简单工厂声明为 abstract类型， 它并不会神奇地变成抽象工厂模式。\npublic class FactoryMethodTest { public static void main(String[] args) { new Application().getProduct(\"1\").method1(); /** * ProductA.method1 executed.. */ } } interface Product{ void method1(); } class ProductFactory{ static Product getProduct(String type){ if(\"1\".equals(type)){ return new ProductA(); } else { return new ProductB(); } } } class ProductA implements Product{ @Override public void method1(){ System.out.println(\"ProductA.method1 executed..\"); } } class ProductB implements Product{ @Override public void method1(){ System.out.println(\"ProductB.method1 executed..\"); } } class Application{ Product createProduct(String type){ return ProductFactory.getProduct(type); } Product getProduct(String type){ Product product = createProduct(type); // 一系列操作共同的预处理操作。。。 return product; } } 抽象工厂模式（Abstract Factory Pattern） 问题背景 解决方案 抽象工厂模式代码实现 本文借助jdk中实现jdbc的原理来描述描述一下抽象工厂模式，首先定义两个抽象接口：连接接口和命令接口。\ninterface IConnect{ void connect(); } interface ICommand{ void command(); } 此时再定义一个数据库操作util用来对数据库进行抽象对数据库进行处理。\ninterface IDatabaseUtils{ IConnect getConnect(); ICommand getCommand(); } 此时如果我们使用mysql作为数据库使用，那么具体实现一下数据库连接接口、数据库命令接口和mysql工具类。\nclass MysqlConnect implements IConnect{ @Override public void connect() { System.out.println(\"connect mysql ...\"); } } class MysqlCommand implements ICommand{ @Override public void command() { System.out.println(\"mysql command...\"); } } class MysqlUtils implements IDatabaseUtils{ @Override public IConnect getConnect() { return new MysqlConnect(); } @Override public ICommand getCommand() { return new MysqlCommand(); } } 假如封装到一个jar包中给所有人使用时，缺少oracle处理工具，我们只需要再具体实现一下数据库连接接口、数据库命令接口和oracle工具类，而不需要去动原有代码\nclass OracleConnect implements IConnect{ @Override public void connect() { System.out.println(\"connect oracle ...\"); } } class OracleCommand implements ICommand{ @Override public void command() { System.out.println(\"oracle command...\"); } } class OracleUtils implements IDatabaseUtils{ @Override public IConnect getConnect() { return new OracleConnect(); } @Override public ICommand getCommand() { return new OracleCommand(); } } 对于上面的示例代码，我们可以通过下面这种方式简单调用，通过IDatabaseUtils引用而不需要关注被调用的具体实现细节\npublic class AbstractFactoryTest { public static void main(String[] args) { IDatabaseUtils iDatabaseUtils = new OracleUtils(); // 不再需要关注被调用的具体细节 iDatabaseUtils.getConnect().connect(); iDatabaseUtils.getCommand().command(); } } 总结：抽象工厂模式就是一种为访问类提供一个创建一组相关或相互依赖对象的接口，且访问类无须指定所要产品的具体类就能得到同族的不同等级的产品的模式结构。优点：1.可以在类的内部对产品族中相关联的多等级产品共同管理，而不必专门引入多个新的类来进行管理；2.当增加一个新的产品族时不需要修改原代码，满足开闭原则。\n单例模式（Singleton Pattern） 建造者模式（Builder Pattern） class Product{ private String productName; private String part1; private String part2; public Product(String productName, String part1, String part2){ this.productName = productName; this.part1 = part1; this.part2 = part2; } static class Builder{ private String productName; private String part1; private String part2; public Builder productName(String productName) { this.productName = productName; return this; } public Builder part1(String part1) { this.part1 = part1; return this; } public Builder part2(String part2) { this.part2 = part2; return this; } public Product build(){ return new Product(this.productName, this.part1, this.part2); } } @Override public String toString() { return \"Product{\" + \"productName='\" + productName + '\\'' + \", part1='\" + part1 + '\\'' + \", part2='\" + part2 + '\\'' + '}'; } } 原型模式（Prototype Pattern） /** * 模型定义： * 指原型实例指定创建对象的种类，并且通过拷贝这些原型创建新的对象。 * * @date 2020/3/23 23:11 */ public class ProtoTypeTest { public static void main(String[] args) throws CloneNotSupportedException { Product product = new Product(\"part1\", \"part2\", \"part3\", \"part4\", new Part(\"xxx\")); Product clone = product.clone(); System.out.println(product); System.out.println(clone); System.out.println(\"---------------对部分数据进行修改----------------\"); clone.setPart1(\"part1A\"); clone.getPart().setName(\"YYY\"); System.out.println(product); System.out.println(clone); } } class Part implements Cloneable{ String name; @Override protected Part clone() throws CloneNotSupportedException { return (Part) super.clone(); } public Part(String name) { this.name = name; } public String getName() { return name; } public void setName(String name) { this.name = name; } @Override public String toString() { return \"Part{[\" + hashCode() + \"]\"+ \"name='\" + name + '\\'' + '}'; } } class Product implements Cloneable{ String part1; String part2; String part3; String part4; public Part getPart() { return part; } public void setPart(Part part) { this.part = part; } Part part; // ... public Product(String part1, String part2, String part3, String part4,Part part) { this.part1 = part1; this.part2 = part2; this.part3 = part3; this.part4 = part4; this.part = part; } @Override protected Product clone() throws CloneNotSupportedException { // 进行深拷贝 Product product = (Product) super.clone(); product.setPart(product.getPart().clone()); return product; } public String getPart1() { return part1; } public void setPart1(String part1) { this.part1 = part1; } public String getPart2() { return part2; } public void setPart2(String part2) { this.part2 = part2; } public String getPart3() { return part3; } public void setPart3(String part3) { this.part3 = part3; } public String getPart4() { return part4; } public void setPart4(String part4) { this.part4 = part4; } @Override public String toString() { return \"Product{[\" + hashCode() + \"]\"+ \"part1='\" + part1 + '\\'' + \", part2='\" + part2 + '\\'' + \", part3='\" + part3 + '\\'' + \", part4='\" + part4 + '\\'' + \", part=\" + part + '}'; } } 结构型模式 适配器模式（Adapter Pattern） 桥接模式（Bridge Pattern） 过滤器模式（Filter、Criteria Pattern） 组合模式（Composite Pattern） 装饰器模式（Decorator Pattern） /** * 装饰者模式：扩展一个类的功能或给一个类附加职责 * * 优点： * 在不改变原有对象的基础上给一个对象扩展功能 * 使用不同的组合可以实现不同的效果 * 符合开闭原则 * * * @author lin.luo@hand-china.com * @date 2020/3/31 0:11 */ public class DecoratorTest { public static void main(String[] args) { Component component = new ConcreteComponent(); // component.operation(); // 在原有的基础上添加功能 component = new ConcreteDecorator1(component); // component.operation(); component = new ConcreteDecorator2(component); component.operation(); } } interface Component{ void operation(); } class ConcreteComponent implements Component{ @Override public void operation() { System.out.println(\"拍照\"); } } abstract class Decorator implements Component{ Component component; public Decorator(Component component) { this.component = component; } } class ConcreteDecorator1 extends Decorator{ public ConcreteDecorator1(Component component) { super(component); } @Override public void operation() { component.operation(); System.out.println(\"美颜\"); } } class ConcreteDecorator2 extends Decorator{ public ConcreteDecorator2(Component component) { super(component); } @Override public void operation() { component.operation(); System.out.println(\"滤镜\"); } } 享元模式（Flyweight Pattern） /** * 享元模式：运用共享技术有效地支持大量细粒度的对象 * 借助全局变量完成对对象的共享 * 对于大量相同的对象，可以节省系统内存 * * @date 2020/3/30 23:58 */ public class FlyWeightTest { public static void main(String[] args) { TreeNode treeNode1 = new TreeNode(3, 4, TreeFactory.getTree(\"A\", \"XXXX\")); TreeNode treeNode2 = new TreeNode(3, 4, TreeFactory.getTree(\"A\", \"XXXX\")); TreeNode treeNode3 = new TreeNode(3, 4, TreeFactory.getTree(\"B\", \"XXXX\")); } } class TreeFactory{ private static HashMap\u003cString, Tree\u003e map = new HashMap\u003c\u003e(); public static Tree getTree(String name, String data){ if(map.containsKey(name)){ return map.get(name); } Tree tree = new Tree(name, data); map.put(name, tree); return tree; } } class TreeNode{ private int x; private int y; private Tree tree; public TreeNode(int x, int y, Tree tree) { this.x = x; this.y = y; this.tree = tree; } } class Tree{ private String name; private String data; public Tree(String name, String data) { this.name = name; this.data = data; System.out.println(\"create tree\"+name); } public String getName() { return name; } public String getData() { return data; } } 代理模式（Proxy Pattern） 门面模式（Facade Pattern） public class FacadeTest { public static void main(String[] args) { new Facade().facadeDoSomething(); } } class client{ } class Facade{ void facadeDoSomething(){ new SubSystem1().method1(); new SubSystem2().method2(); new SubSystem3().method3(); } } class SubSystem1{ public void method1(){ System.out.println(\"sub system1 method1\"); } } class SubSystem2{ public void method2(){ System.out.println(\"sub system2 method2\"); } } class SubSystem3{ public void method3(){ System.out.println(\"sub system3 method3\"); } } 行为型模式 责任链模式（Chain of Responsibility Pattern） class Request{ private boolean loggedOn; private boolean frequentOk; private boolean isPermits; private boolean containsSensitiveWords; private String requestBody; public Request(boolean loggedOn, boolean frequentOk, boolean isPermits, boolean containsSensitiveWords, String requestBody) { this.loggedOn = loggedOn; this.frequentOk = frequentOk; this.isPermits = isPermits; this.containsSensitiveWords = containsSensitiveWords; this.requestBody = requestBody; } public boolean isLoggedOn() { return loggedOn; } public void setLoggedOn(boolean loggedOn) { this.loggedOn = loggedOn; } public boolean isFrequentOk() { return frequentOk; } public void setFrequentOk(boolean frequentOk) { this.frequentOk = frequentOk; } public boolean isPermits() { return isPermits; } public void setPermits(boolean permits) { isPermits = permits; } public boolean isContainsSensitiveWords() { return containsSensitiveWords; } public void setContainsSensitiveWords(boolean containsSensitiveWords) { this.containsSensitiveWords = containsSensitiveWords; } public String getRequestBody() { return requestBody; } public void setRequestBody(String requestBody) { this.requestBody = requestBody; } } abstract class Handler{ Handler next; public Handler(Handler next) { this.next = next; } public Handler getNext() { return next; } public void setNext(Handler next) { this.next = next; } abstract boolean process(Request request); } class FequentOkHandler extends Handler{ public FequentOkHandler(Handler next) { super(next); } @Override boolean process(Request request) { System.out.print(\"访问频率控制:\"); if(request.isFrequentOk()){ System.out.println(\"ok\"); Handler next = getNext(); if(next == null){ return true; } if(!next.process(request)){ return false; } else { return true; } } System.out.println(\"error\"); return false; } } class IsPermitsHandler extends Handler{ public IsPermitsHandler(Handler next) { super(next); } @Override boolean process(Request request) { System.out.print(\"权限访问控制:\"); if(request.isPermits()){ System.out.println(\"ok\"); Handler next = getNext(); if(next == null){ return true; } if(!next.process(request)){ return false; } else { return true; } } System.out.println(\"error\"); return false; } } class LoggedOnHandler extends Handler{ public LoggedOnHandler(Handler next) { super(next); } @Override boolean process(Request request) { System.out.print(\"登录权限控制:\"); if(request.isLoggedOn()){ System.out.println(\"ok\"); Handler next = getNext(); if(next == null){ return true; } if(!next.process(request)){ return false; } else { return true; } } System.out.println(\"error\"); return false; } } class ContainsSensitiveWordsHandler extends Handler{ public ContainsSensitiveWordsHandler(Handler next) { super(next); } @Override boolean process(Request request) { System.out.print(\"敏感词权限控制:\"); if(request.isContainsSensitiveWords()){ System.out.println(\"ok\"); Handler next = getNext(); if(next == null){ return true; } if(!next.process(request)){ return false; } else { return true; } } System.out.println(\"error\"); return false; } } public class ChainOfResponsibilityTest { public static void main(String[] args) { Request request = new Request(true, true, false, true, \"hha\"); Handler handler = new FequentOkHandler(new LoggedOnHandler(new ContainsSensitiveWordsHandler(new IsPermitsHandler(null)))); if(handler.process(request)){ System.out.println(\"开始进行业务处理\"); }else { System.out.println(\"请求异常\"); } } } 命令模式（Command Pattern） 解释器模式（Interpreter Pattern） 迭代器模式（Iterator Pattern） 迭代器模式是一种用于顺序访问集合对象的元素，但是不需要知道集合对象的底层表示的模式。主要目的是在不暴露聚合对象的内部结构的情况下，让外部代码透明地访问聚合的内部数据。\n迭代器模式主要包含以下角色。\n抽象聚合（Container）角色：定义存储、添加、删除聚合对象以及创建迭代器对象的接口。 具体聚合（MyRepository）角色：实现抽象聚合类，返回一个具体迭代器的实例。 抽象迭代器（Iterator）角色：定义访问和遍历聚合元素的接口，通常包含 hasNext()、next() 等方法。 具体迭代器（MyIterator）角色：实现抽象迭代器接口中所定义的方法，完成对聚合对象的遍历，记录遍历的当前位置。 类图表示如下； 具体实现代码：\n/** * 接口容器 */ public interface Container { Iterator getIterator(); } /** * 接口迭代器 */ public interface Iterator { boolean hasNext(); Object next(); } /** * 具体容器 */ public class MyRepository implements Container { public Object arr[] = {\"a\", \"b\", \"c\"}; @Override public Iterator getIterator() { return new MyIterator(); } /** * 具体迭代器 */ private class MyIterator implements Iterator{ int index; @Override public boolean hasNext() { return index \u003c arr.length; } @Override public Object next() { if(this.hasNext()){ return arr[index++]; } return null; } } } /** * 测试类 */ public class IteratorTest { public static void main(String[] args) { Container container = new MyRepository(); Iterator iterator = container.getIterator(); while (iterator.hasNext()){ System.out.println(iterator.next()); } } } 中介者模式（Mediator Pattern） 备忘录模式（Memento Pattern） 观察者模式（Observer Pattern） package com.lin.observe_pattern; import java.util.ArrayList; import java.util.HashMap; import java.util.List; import java.util.Map; public class ObservePatternTest { public static void main(String[] args) { EventManager eventManager = new EventManager(\"A\", \"B\"); eventManager.subscribe(\"A\", new ListenerA()); eventManager.subscribe(\"A\", new ListenerB()); eventManager.subscribe(\"B\", new ListenerA()); eventManager.subscribe(\"B\", new ListenerB()); eventManager.notify(\"B\", \"改变世界\"); } } class EventManager{ Map\u003cString, List\u003cEventListener\u003e\u003e listeners = new HashMap\u003c\u003e(); public EventManager(String... operations) { for (String operation : operations) { this.listeners.put(operation, new ArrayList\u003c\u003e()); } } public void subscribe(String eventType, EventListener listener) { List\u003cEventListener\u003e users = listeners.get(eventType); users.add(listener); } public void unsubscribe(String eventType, EventListener listener) { List\u003cEventListener\u003e users = listeners.get(eventType); users.remove(listener); } public void notify(String eventType, String msg) { List\u003cEventListener\u003e users = listeners.get(eventType); for (EventListener listener : users) { listener.comsumer(eventType, msg); } } } /** * 通用观察者接口,定义comsumer方法，消费通知的消息 */ interface EventListener{ void comsumer(String eventType, String msg); } class ListenerA implements EventListener{ @Override public void comsumer(String eventType, String msg) { System.out.println(\"ListenerA收到通知:\"+eventType+\"-\"+msg+\",准备xxx\"); } } class ListenerB implements EventListener{ @Override public void comsumer(String eventType, String msg) { System.out.println(\"ListenerB收到通知:\"+eventType+\"-\"+msg+\",准备yyy\"); } } 状态模式（State Pattern） 空对象模式（Null Object Pattern） 策略模式（Strategy Pattern） public class StrategyTest { public static void main(String[] args) { Animal dog = new Dog(); dog.move(); dog.setMoveable(new DogMove()); dog.move(); } } interface Moveable{ void move(); } interface Attackable{ void attack(); } class Runable implements Moveable{ @Override public void move() { System.out.println(\"------ run -----\"); } } class DogMove implements Moveable{ @Override public void move() { System.out.println(\"狗摇着尾巴移动\"); } } abstract class Animal{ Moveable moveable; Attackable attackable; public Animal() { } public Animal(Moveable moveable, Attackable attackable) { this.moveable = moveable; this.attackable = attackable; } abstract public void display(); abstract void move(); abstract void attack(); public Moveable getMoveable() { return moveable; } public void setMoveable(Moveable moveable) { this.moveable = moveable; } public Attackable getAttackable() { return attackable; } public void setAttackable(Attackable attackable) { this.attackable = attackable; } } class Dog extends Animal{ public Dog() { super(new Runable(), null); } public Dog(Moveable moveable, Attackable attackable) { super(moveable, attackable); } @Override public void display() { System.out.println(\"------ 狗 ----------\"); } @Override void move() { moveable.move(); } @Override void attack() { attackable.attack(); } } 模板模式（Template Pattern） 模板方法模式的目的就是在不改变现有类的算法结构下，将一些具体步骤延迟到子类中，\n/** * 模式定义： * 定义一个操作的算法骨架，而将一些步骤延迟到子类中。 * Template Method 使得子类可以不改变一个算法的结构即可重定义该算法的某些特定步骤 * * Servlet Api \u0026 Spring中的应用 * javax.servlet.http.HttpServlet * org.springframework.web.servlet.mvc.AbstractController * * @author 2493468168@qq.com * @date 2020/3/22 14:55 */ public class TemplateMethodTest { public static void main(String[] args) { AbstractClass abstractClass = new SubClass(); abstractClass.operate(); System.out.println(\"--------------\"); AbstractClass abstractClass2 = new SubClass2(); abstractClass2.operate(); /** * pre... * step1.. * templateMethod1() * step final... * -------------- * pre... * step1.. * templateMethod2() * step final... */ } } abstract class AbstractClass{ public void operate(){ System.out.println(\"pre...\"); System.out.println(\"step1..\"); templateMethod(); System.out.println(\"step final...\"); } abstract void templateMethod(); } class SubClass extends AbstractClass{ @Override void templateMethod() { System.out.println(\"templateMethod1()\"); } } class SubClass2 extends AbstractClass{ @Override void templateMethod() { System.out.println(\"templateMethod2()\"); } } 访问者模式（Visitor Pattern） 参考资料： 设计模式目录：22种设计模式 (refactoringguru.cn)\n","wordCount":"8606","inLanguage":"en","datePublished":"2023-02-13T12:43:48+08:00","dateModified":"2024-05-20T13:32:09+08:00","author":{"@type":"Person","name":"luolin"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://luolin1024.github.io/blog_prepublish/%E6%8A%80%E6%9C%AF%E6%8F%90%E5%8D%87/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},"publisher":{"@type":"Organization","name":"luolin1024","logo":{"@type":"ImageObject","url":"https://luolin1024.github.io/favicon.ico"}}}</script></head><body id=top><script>window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://luolin1024.github.io accesskey=h title="luolin的博客 (Alt + H)">luolin的博客</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://luolin1024.github.io/posts title=📚文章><span>📚文章</span></a></li><li><a href=https://luolin1024.github.io/archives/ title=⏱时间轴><span>⏱时间轴</span></a></li><li><a href=https://luolin1024.github.io/search/ title="🔍搜索 (Alt + /)" accesskey=/><span>🔍搜索</span></a></li><li><a href=https://luolin1024.github.io/tags title=🔖标签><span>🔖标签</span></a></li><li><a href=https://luolin1024.github.io/about title=🙋🏻‍♂️关于><span>🙋🏻‍♂️关于</span></a></li><li><a href=https://luolin1024.github.io/links title=🤝友链><span>🤝友链</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://luolin1024.github.io>Home</a>&nbsp;»&nbsp;<a href=https://luolin1024.github.io/blog_prepublish/>Blog_prepublishes</a></div><h1 class="post-title entry-hint-parent">设计模式</h1><div class=post-meta><span title='2023-02-13 12:43:48 +0800 +0800'>2023-02-13</span>&nbsp;·&nbsp;18 min&nbsp;·&nbsp;8606 words&nbsp;·&nbsp;luolin
本文总阅读量 <span id=umami_value_page_pv></span> 次
本文总访客量 <span id=umami_value_page_uv></span> 人</div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><ul><ul><li><a href=#java%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%e6%a6%82%e8%bf%b0 aria-label=Java设计模式概述>Java设计模式概述</a></li></ul><li><a href=#%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%e7%9a%84%e5%85%ad%e5%a4%a7%e5%8e%9f%e5%88%99 aria-label=设计模式的六大原则>设计模式的六大原则</a><ul><ul><li><a href=#%e5%88%9b%e5%bb%ba%e5%9e%8b%e6%a8%a1%e5%bc%8fcreational-patterns aria-label="创建型模式（Creational Patterns）">创建型模式（Creational Patterns）</a></li><li><a href=#%e7%bb%93%e6%9e%84%e5%9e%8b%e6%a8%a1%e5%bc%8fstructural-patterns aria-label="结构型模式（Structural Patterns）">结构型模式（Structural Patterns）</a></li><li><a href=#%e8%a1%8c%e4%b8%ba%e5%9e%8b%e6%a8%a1%e5%bc%8fbehavioral-patterns aria-label="行为型模式（Behavioral Patterns）">行为型模式（Behavioral Patterns）</a></li></ul></ul></li></ul><li><a href=#%e5%88%9b%e5%bb%ba%e5%9e%8b%e6%a8%a1%e5%bc%8f aria-label=创建型模式>创建型模式</a><ul><li><a href=#%e5%b7%a5%e5%8e%82%e6%a8%a1%e5%bc%8ffactory-pattern aria-label="工厂模式（Factory Pattern）">工厂模式（Factory Pattern）</a><ul><li><a href=#%e9%97%ae%e9%a2%98%e8%83%8c%e6%99%af aria-label=问题背景>问题背景</a></li><li><a href=#%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88 aria-label=解决方案>解决方案</a></li><li><a href=#%e5%b7%a5%e5%8e%82%e6%96%b9%e6%b3%95%e6%a8%a1%e5%bc%8f%e4%bb%a3%e7%a0%81%e5%ae%9e%e7%8e%b0 aria-label=工厂方法模式代码实现>工厂方法模式代码实现</a></li><li><a href=#%e7%ae%80%e5%8d%95%e5%b7%a5%e5%8e%82 aria-label=简单工厂>简单工厂</a></li></ul></li><li><a href=#%e6%8a%bd%e8%b1%a1%e5%b7%a5%e5%8e%82%e6%a8%a1%e5%bc%8fabstract-factory-pattern aria-label="抽象工厂模式（Abstract Factory Pattern）">抽象工厂模式（Abstract Factory Pattern）</a><ul><li><a href=#%e9%97%ae%e9%a2%98%e8%83%8c%e6%99%af-1 aria-label=问题背景>问题背景</a></li><li><a href=#%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88-1 aria-label=解决方案>解决方案</a></li><li><a href=#%e6%8a%bd%e8%b1%a1%e5%b7%a5%e5%8e%82%e6%a8%a1%e5%bc%8f%e4%bb%a3%e7%a0%81%e5%ae%9e%e7%8e%b0 aria-label=抽象工厂模式代码实现>抽象工厂模式代码实现</a></li></ul></li><li><a href=#%e5%8d%95%e4%be%8b%e6%a8%a1%e5%bc%8fsingleton-pattern aria-label="单例模式（Singleton Pattern）">单例模式（Singleton Pattern）</a></li><li><a href=#%e5%bb%ba%e9%80%a0%e8%80%85%e6%a8%a1%e5%bc%8fbuilder-pattern aria-label="建造者模式（Builder Pattern）">建造者模式（Builder Pattern）</a></li><li><a href=#%e5%8e%9f%e5%9e%8b%e6%a8%a1%e5%bc%8fprototype-pattern aria-label="原型模式（Prototype Pattern）">原型模式（Prototype Pattern）</a></li></ul></li><li><a href=#%e7%bb%93%e6%9e%84%e5%9e%8b%e6%a8%a1%e5%bc%8f aria-label=结构型模式>结构型模式</a><ul><li><a href=#%e9%80%82%e9%85%8d%e5%99%a8%e6%a8%a1%e5%bc%8fadapter-pattern aria-label="适配器模式（Adapter Pattern）">适配器模式（Adapter Pattern）</a></li><li><a href=#%e6%a1%a5%e6%8e%a5%e6%a8%a1%e5%bc%8fbridge-pattern aria-label="桥接模式（Bridge Pattern）">桥接模式（Bridge Pattern）</a></li><li><a href=#%e8%bf%87%e6%bb%a4%e5%99%a8%e6%a8%a1%e5%bc%8ffiltercriteria-pattern aria-label="过滤器模式（Filter、Criteria Pattern）">过滤器模式（Filter、Criteria Pattern）</a></li><li><a href=#%e7%bb%84%e5%90%88%e6%a8%a1%e5%bc%8fcomposite-pattern aria-label="组合模式（Composite Pattern）">组合模式（Composite Pattern）</a></li><li><a href=#%e8%a3%85%e9%a5%b0%e5%99%a8%e6%a8%a1%e5%bc%8fdecorator-pattern aria-label="装饰器模式（Decorator Pattern）">装饰器模式（Decorator Pattern）</a></li><li><a href=#%e4%ba%ab%e5%85%83%e6%a8%a1%e5%bc%8fflyweight-pattern aria-label="享元模式（Flyweight Pattern）">享元模式（Flyweight Pattern）</a></li><li><a href=#%e4%bb%a3%e7%90%86%e6%a8%a1%e5%bc%8fproxy-pattern aria-label="代理模式（Proxy Pattern）">代理模式（Proxy Pattern）</a></li><li><a href=#%e9%97%a8%e9%9d%a2%e6%a8%a1%e5%bc%8ffacade-pattern aria-label="门面模式（Facade Pattern）">门面模式（Facade Pattern）</a></li></ul></li><li><a href=#%e8%a1%8c%e4%b8%ba%e5%9e%8b%e6%a8%a1%e5%bc%8f aria-label=行为型模式>行为型模式</a><ul><li><a href=#%e8%b4%a3%e4%bb%bb%e9%93%be%e6%a8%a1%e5%bc%8fchain-of-responsibility-pattern aria-label="责任链模式（Chain of Responsibility Pattern）">责任链模式（Chain of Responsibility Pattern）</a></li><li><a href=#%e5%91%bd%e4%bb%a4%e6%a8%a1%e5%bc%8fcommand-pattern aria-label="命令模式（Command Pattern）">命令模式（Command Pattern）</a></li><li><a href=#%e8%a7%a3%e9%87%8a%e5%99%a8%e6%a8%a1%e5%bc%8finterpreter-pattern aria-label="解释器模式（Interpreter Pattern）">解释器模式（Interpreter Pattern）</a></li><li><a href=#%e8%bf%ad%e4%bb%a3%e5%99%a8%e6%a8%a1%e5%bc%8fiterator-pattern aria-label="迭代器模式（Iterator Pattern）">迭代器模式（Iterator Pattern）</a></li><li><a href=#%e4%b8%ad%e4%bb%8b%e8%80%85%e6%a8%a1%e5%bc%8fmediator-pattern aria-label="中介者模式（Mediator Pattern）">中介者模式（Mediator Pattern）</a></li><li><a href=#%e5%a4%87%e5%bf%98%e5%bd%95%e6%a8%a1%e5%bc%8fmemento-pattern aria-label="备忘录模式（Memento Pattern）">备忘录模式（Memento Pattern）</a></li><li><a href=#%e8%a7%82%e5%af%9f%e8%80%85%e6%a8%a1%e5%bc%8fobserver-pattern aria-label="观察者模式（Observer Pattern）">观察者模式（Observer Pattern）</a></li><li><a href=#%e7%8a%b6%e6%80%81%e6%a8%a1%e5%bc%8fstate-pattern aria-label="状态模式（State Pattern）">状态模式（State Pattern）</a></li><li><a href=#%e7%a9%ba%e5%af%b9%e8%b1%a1%e6%a8%a1%e5%bc%8fnull-object-pattern aria-label="空对象模式（Null Object Pattern）">空对象模式（Null Object Pattern）</a></li><li><a href=#%e7%ad%96%e7%95%a5%e6%a8%a1%e5%bc%8fstrategy-pattern aria-label="策略模式（Strategy Pattern）">策略模式（Strategy Pattern）</a></li><li><a href=#%e6%a8%a1%e6%9d%bf%e6%a8%a1%e5%bc%8ftemplate-pattern aria-label="模板模式（Template Pattern）">模板模式（Template Pattern）</a></li><li><a href=#%e8%ae%bf%e9%97%ae%e8%80%85%e6%a8%a1%e5%bc%8fvisitor-pattern aria-label="访问者模式（Visitor Pattern）">访问者模式（Visitor Pattern）</a></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h3 id=java设计模式概述>Java设计模式概述<a hidden class=anchor aria-hidden=true href=#java设计模式概述>#</a></h3><p>设计模式（Design pattern）是软件开发人员在软件开发过程中面临的一般问题的解决方案模板，这些模板是经过相当长的一段时间的试验和错误总结出来的。
为什么要使用设计模式？
使用设计模式是为了重用代码、提高代码的可读性和可靠性。 在项目中合理地运用设计模式可以完美地解决很多问题，每种模式在现实中都有相应的原理来与之对应，每种模式都描述了一个在我们周围不断重复发生的问题，以及该问题的核心解决方案。
常见的设计模式分为三大类：创建型模式、结构型模式和行为型模式。</p><h2 id=设计模式的六大原则>设计模式的六大原则<a hidden class=anchor aria-hidden=true href=#设计模式的六大原则>#</a></h2><p><strong>1、开闭原则（Open Close Principle）</strong></p><p>开闭原则的意思是：<strong>对扩展开放，对修改关闭</strong>。在程序需要进行拓展的时候，不能去修改原有的代码，实现一个热插拔的效果。简言之，是为了使程序的扩展性好，易于维护和升级。想要达到这样的效果，我们需要使用接口和抽象类，后面的具体设计中我们会提到这点。</p><p><strong>2、里氏代换原则（Liskov Substitution Principle）</strong></p><p>里氏代换原则是面向对象设计的基本原则之一。 里氏代换原则中说，任何基类可以出现的地方，子类一定可以出现。LSP 是继承复用的基石，只有当派生类可以替换掉基类，且软件单位的功能不受到影响时，基类才能真正被复用，而派生类也能够在基类的基础上增加新的行为。里氏代换原则是对开闭原则的补充。实现开闭原则的关键步骤就是抽象化，而基类与子类的继承关系就是抽象化的具体实现，所以里氏代换原则是对实现抽象化的具体步骤的规范。</p><p><strong>3、依赖倒转原则（Dependence Inversion Principle）</strong></p><p>这个原则是开闭原则的基础，具体内容：针对接口编程，依赖于抽象而不依赖于具体。</p><p><strong>4、接口隔离原则（Interface Segregation Principle）</strong></p><p>这个原则的意思是：使用多个隔离的接口，比使用单个接口要好。它还有另外一个意思是：降低类之间的耦合度。由此可见，其实设计模式就是从大型软件架构出发、便于升级和维护的软件设计思想，它强调降低依赖，降低耦合。</p><p><strong>5、迪米特法则，又称最少知道原则（Demeter Principle）</strong></p><p>最少知道原则是指：一个实体应当尽量少地与其他实体之间发生相互作用，使得系统功能模块相对独立。</p><p><strong>6、合成复用原则（Composite Reuse Principle）</strong></p><p>合成复用原则是指：尽量使用合成/聚合的方式，而不是使用继承。</p><h4 id=创建型模式creational-patterns>创建型模式（Creational Patterns）<a hidden class=anchor aria-hidden=true href=#创建型模式creational-patterns>#</a></h4><p>创建型模式提供了一种在创建对象的同时隐藏创建逻辑的方式，而不是使用 new 运算符直接实例化对象。这使得程序在判断针对某个给定实例需要创建哪些对象时更加灵活。</p><ol><li><p><strong>单例模式（Singleton Pattern）</strong></p><ul><li><strong>适用场景</strong>：需要确保某一个类只有一个实例，且自行实例化并向整个系统提供这个实例。</li><li><strong>示例</strong>：数据库连接池、配置文件读取类。</li></ul></li><li><p><strong>工厂方法模式（Factory Method Pattern）</strong></p><ul><li><strong>适用场景</strong>：定义一个创建对象的接口，但由子类决定要实例化的类是哪一个。工厂方法使一个类的实例化延迟到其子类。</li><li><strong>示例</strong>：日志记录器、读取不同类型文件的解析器。</li></ul></li><li><p><strong>抽象工厂模式（Abstract Factory Pattern）</strong></p><ul><li><strong>适用场景</strong>：提供一个创建一系列相关或互相依赖对象的接口，而无需指定它们具体的类。</li><li><strong>示例</strong>：GUI工具包中的按钮、文本框、菜单等。</li></ul></li><li><p><strong>建造者模式（Builder Pattern）</strong></p><ul><li><strong>适用场景</strong>：将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示。</li><li><strong>示例</strong>：构建复杂对象如文档、计算机硬件配置。</li></ul></li><li><p><strong>原型模式（Prototype Pattern）</strong></p><ul><li><strong>适用场景</strong>：用原型实例指定创建对象的种类，并且通过拷贝这些原型创建新的对象。</li><li><strong>示例</strong>：对象复制、需要大量相似对象的创建。</li></ul></li></ol><h4 id=结构型模式structural-patterns>结构型模式（Structural Patterns）<a hidden class=anchor aria-hidden=true href=#结构型模式structural-patterns>#</a></h4><p>结构型模式设计模式关注类和对象的组合。继承的概念被用来组合接口和定义组合对象获得新功能的方式。</p><ol><li><p><strong>适配器模式（Adapter Pattern）</strong></p><ul><li><strong>适用场景</strong>：将一个类的接口转换成客户希望的另一个接口，使得原本由于接口不兼容而不能一起工作的那些类可以一起工作。</li><li><strong>示例</strong>：旧系统与新系统的集成。</li></ul></li><li><p><strong>桥接模式（Bridge Pattern）</strong></p><ul><li><strong>适用场景</strong>：将抽象部分与它的实现部分分离，使它们都可以独立地变化。</li><li><strong>示例</strong>：图形绘制程序中的形状和颜色分离。</li></ul></li><li><p><strong>组合模式（Composite Pattern）</strong></p><ul><li><strong>适用场景</strong>：将对象组合成树形结构以表示“部分-整体”的层次结构，使得用户对单个对象和组合对象的使用具有一致性。</li><li><strong>示例</strong>：文件系统中的文件和文件夹。</li></ul></li><li><p><strong>装饰器模式（Decorator Pattern）</strong></p><ul><li><strong>适用场景</strong>：动态地给一个对象添加一些额外的职责，就增加功能来说，装饰模式比生成子类更为灵活。</li><li><strong>示例</strong>：流处理中的BufferedReader和BufferedWriter。</li></ul></li><li><p><strong>外观模式（Facade Pattern）</strong></p><ul><li><strong>适用场景</strong>：为子系统中的一组接口提供一个一致的界面，使得子系统更加容易使用。</li><li><strong>示例</strong>：简化复杂系统的接口，如简化的数据库接口。</li></ul></li><li><p><strong>享元模式（Flyweight Pattern）</strong></p><ul><li><strong>适用场景</strong>：运用共享技术有效地支持大量细粒度对象的复用。</li><li><strong>示例</strong>：文本编辑器中的字符对象管理。</li></ul></li><li><p><strong>代理模式（Proxy Pattern）</strong></p><ul><li><strong>适用场景</strong>：为其他对象提供一种代理以控制对这个对象的访问。</li><li><strong>示例</strong>：虚拟代理、远程代理、保护代理。</li></ul></li></ol><h4 id=行为型模式behavioral-patterns>行为型模式（Behavioral Patterns）<a hidden class=anchor aria-hidden=true href=#行为型模式behavioral-patterns>#</a></h4><p>行为型设计模式特别关注对象之间的通信。</p><ol><li><p><strong>责任链模式（Chain of Responsibility Pattern）</strong></p><ul><li><strong>适用场景</strong>：为请求创建一个接收对象的链，这样多个对象都有机会处理请求，避免请求的发送者和接收者之间的耦合。</li><li><strong>示例</strong>：事务处理中的审批流程。</li></ul></li><li><p><strong>命令模式（Command Pattern）</strong></p><ul><li><strong>适用场景</strong>：将请求封装成对象，从而使你可以用不同的请求对客户进行参数化；对请求排队或者记录请求日志，以及支持可撤销的操作。</li><li><strong>示例</strong>：菜单命令、操作日志、撤销操作。</li></ul></li><li><p><strong>解释器模式（Interpreter Pattern）</strong></p><ul><li><strong>适用场景</strong>：给定一种语言，定义它的文法表示，并定义一个解释器，这个解释器使用该表示来解释语言中的句子。</li><li><strong>示例</strong>：编译器、正则表达式处理。</li></ul></li><li><p><strong>迭代器模式（Iterator Pattern）</strong></p><ul><li><strong>适用场景</strong>：提供一种方法顺序访问一个聚合对象中的各个元素，而又不暴露其内部的表示。</li><li><strong>示例</strong>：遍历集合对象，如列表、栈、队列等。</li></ul></li><li><p><strong>中介者模式（Mediator Pattern）</strong></p><ul><li><strong>适用场景</strong>：用一个中介对象来封装一系列对象的交互，使得这些对象不需要显式地相互引用，从而使它们可以松散耦合。</li><li><strong>示例</strong>：聊天室中的消息传递。</li></ul></li><li><p><strong>备忘录模式（Memento Pattern）</strong></p><ul><li><strong>适用场景</strong>：在不破坏封装性的前提下，捕获一个对象的内部状态，并在该对象之外保存这个状态。</li><li><strong>示例</strong>：撤销功能、历史记录。</li></ul></li><li><p><strong>观察者模式（Observer Pattern）</strong></p><ul><li><strong>适用场景</strong>：定义对象间的一种一对多的依赖关系，使得每当一个对象改变状态，则所有依赖于它的对象都会得到通知并被自动更新。</li><li><strong>示例</strong>：事件监听机制。</li></ul></li><li><p><strong>状态模式（State Pattern）</strong></p><ul><li><strong>适用场景</strong>：允许对象在其内部状态改变时改变它的行为，对象看起来似乎修改了它的类。</li><li><strong>示例</strong>：状态机实现、界面导航。</li></ul></li><li><p><strong>策略模式（Strategy Pattern）</strong></p><ul><li><strong>适用场景</strong>：定义一系列算法，把它们一个个封装起来，并且使它们可互相替换。本模式使得算法可独立于使用它的客户而变化。</li><li><strong>示例</strong>：各种排序算法、支付方式选择。</li></ul></li><li><p><strong>模板方法模式（Template Method Pattern）</strong></p><ul><li><strong>适用场景</strong>：定义一个操作中的算法的骨架，而将一些步骤延迟到子类中。模板方法使得子类可以不改变一个算法的结构即可重新定义该算法的某些特定步骤。</li><li><strong>示例</strong>：数据处理中的标准处理流程。</li></ul></li><li><p><strong>访问者模式（Visitor Pattern）</strong></p><ul><li><strong>适用场景</strong>：表示一个作用于某对象结构中的各元素的操作。它使你可以在不改变各元素类的前提下定义作用于这些元素的新操作。</li><li><strong>示例</strong>：对象结构如文件系统中的文件和文件夹，编译器中的语法树。</li></ul></li></ol><h1 id=创建型模式>创建型模式<a hidden class=anchor aria-hidden=true href=#创建型模式>#</a></h1><h2 id=工厂模式factory-pattern>工厂模式（Factory Pattern）<a hidden class=anchor aria-hidden=true href=#工厂模式factory-pattern>#</a></h2><h3 id=问题背景>问题背景<a hidden class=anchor aria-hidden=true href=#问题背景>#</a></h3><p>假设你正在开发一款物流管理应用。 最初版本只能处理卡车运输， 因此大部分代码都在位于名为 <code>卡车</code>的类中。一段时间后， 这款应用变得极受欢迎，同时 你每天都能收到十几次来自海运公司的请求， 希望应用能够支持海上物流功能。
这可是个好消息。 但是代码问题该如何处理呢？目前， 大部分代码都与 <code>卡车</code>类相关。 在程序中添加 <code>轮船</code>类需要修改全部代码。 更糟糕的是， 如果你以后需要在程序中支持另外一种运输方式， 很可能需要再次对这些代码进行大幅修改。
最后， 你将不得不编写繁复的代码， 根据不同的运输对象类， 在应用中进行不同的处理。</p><h3 id=解决方案>解决方案<a hidden class=anchor aria-hidden=true href=#解决方案>#</a></h3><p>工厂方法模式建议使用特殊的_工厂_方法代替对于对象构造函数的直接调用 （即使用 <code>new</code>运算符）。 不用担心， 对象仍将通过 <code>new</code>运算符创建， 只是该运算符改在工厂方法中调用罢了。 工厂方法返回的对象通常被称作 “产品”。</p><p><div class=post-img-view><a data-fancybox=gallery href=https://cdn.jsdelivr.net/gh/luolin1024/image@main/img/20240716221737.png><img src=https://cdn.jsdelivr.net/gh/luolin1024/image@main/img/20240716221737.png alt=image.png></a></div>乍看之下， 这种更改可能毫无意义： 我们只是改变了程序中调用构造函数的位置而已。 但是， 仔细想一下， 现在你可以在子类中重写工厂方法， 从而改变其创建产品的类型。
但有一点需要注意:仅当这些产品具有共同的基类或者接口时， 子类才能返回不同类型的产品， 同时基类中的工厂方法还应将其返回类型声明为这一共有接口。<div class=post-img-view><a data-fancybox=gallery href=https://cdn.jsdelivr.net/gh/luolin1024/image@main/img/20240716221837.png><img src=https://cdn.jsdelivr.net/gh/luolin1024/image@main/img/20240716221837.png alt=image.png></a></div>举例来说， ​ <code>卡车</code>Truck和 <code>轮船</code>Ship类都必须实现 <code>运输</code>Transport接口， 该接口声明了一个名为 <code>deliver</code>交付的方法。 每个类都将以不同的方式实现该方法： 卡车走陆路交付货物， 轮船走海路交付货物。 ​ <code>陆路运输</code>Road­Logistics类中的工厂方法返回卡车对象， 而 <code>海路运输</code>Sea­Logistics类则返回轮船对象。</p><h3 id=工厂方法模式代码实现>工厂方法模式代码实现<a hidden class=anchor aria-hidden=true href=#工厂方法模式代码实现>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=c1>// 工厂方法模式
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kn>package</span> <span class=nn>com.lin.factorypattern</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>FactoryMethodTest</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 假设有4个订单,分别为卡车运输、卡车加速运输、海陆运输、海陆加速运输
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>Factory</span> <span class=n>factory</span>  <span class=o>=</span> <span class=k>new</span> <span class=n>TruckFactory</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=n>factory</span><span class=o>.</span><span class=na>deliver</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>Factory</span> <span class=n>factory2</span>  <span class=o>=</span> <span class=k>new</span> <span class=n>ShipFactory</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=n>factory</span><span class=o>.</span><span class=na>deliver</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>Factory</span> <span class=n>factory3</span>  <span class=o>=</span> <span class=k>new</span> <span class=n>TruckFactory</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=n>factory</span><span class=o>.</span><span class=na>speedDeliver</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>Factory</span> <span class=n>factory4</span>  <span class=o>=</span> <span class=k>new</span> <span class=n>ShipFactory</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=n>factory</span><span class=o>.</span><span class=na>speedDeliver</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * 通用产品接口
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kd>interface</span> <span class=nc>Transport</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>deliver</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>speedDeliver</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * 具体产品:Truck
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Truck</span> <span class=kd>implements</span> <span class=n>Transport</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>deliver</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;在盒子中以陆路运输。&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>speedDeliver</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;卡车加速1倍运输。&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * 具体产品:Ship
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Ship</span> <span class=kd>implements</span> <span class=n>Transport</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>deliver</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;在集装箱中以海路运输。&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>speedDeliver</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;ship 无法加速。以原速度运输&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * 通用创建者（工厂）
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kd>abstract</span> <span class=kd>class</span> <span class=nc>Factory</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>deliver</span><span class=o>(){</span>
</span></span><span class=line><span class=cl>        <span class=n>Transport</span> <span class=n>product</span> <span class=o>=</span> <span class=n>createProduct</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=n>product</span><span class=o>.</span><span class=na>deliver</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>speedDeliver</span><span class=o>(){</span>
</span></span><span class=line><span class=cl>        <span class=n>Transport</span> <span class=n>product</span> <span class=o>=</span> <span class=n>createProduct</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=n>product</span><span class=o>.</span><span class=na>speedDeliver</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=kd>protected</span> <span class=kd>abstract</span> <span class=n>Transport</span> <span class=nf>createProduct</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * 具体创建者:Truck
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>TruckFactory</span> <span class=kd>extends</span> <span class=n>Factory</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>protected</span> <span class=n>Transport</span> <span class=nf>createProduct</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=n>Truck</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * 具体创建者:Ship
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>ShipFactory</span> <span class=kd>extends</span> <span class=n>Factory</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>protected</span> <span class=n>Transport</span> <span class=nf>createProduct</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=n>Truck</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h3 id=简单工厂>简单工厂<a hidden class=anchor aria-hidden=true href=#简单工厂>#</a></h3><p>简单工厂模式 描述了一个类， 它拥有一个包含大量条件语句的构建方法， 可根据方法的参数来选择对何种产品进行初始化并将其返回。
人们通常会将简单工厂与普通的工厂或其它创建型设计模式混淆。 在绝大多数情况下， 简单工厂是引入<strong>工厂方法</strong>或<strong>抽象工厂模式</strong>时的一个中间步骤。
简单工厂通常没有子类。 但当从一个简单工厂中抽取出子类后， 它看上去就会更像经典的工厂方法模式了。
顺便提一句， 如果你将一个简单工厂声明为 abstract类型， 它并不会神奇地变成抽象工厂模式。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>FactoryMethodTest</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>new</span> <span class=n>Application</span><span class=o>().</span><span class=na>getProduct</span><span class=o>(</span><span class=s>&#34;1&#34;</span><span class=o>).</span><span class=na>method1</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>         * ProductA.method1 executed..
</span></span></span><span class=line><span class=cl><span class=cm>         */</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>interface</span> <span class=nc>Product</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>method1</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>ProductFactory</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>static</span> <span class=n>Product</span> <span class=nf>getProduct</span><span class=o>(</span><span class=n>String</span> <span class=n>type</span><span class=o>){</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=o>(</span><span class=s>&#34;1&#34;</span><span class=o>.</span><span class=na>equals</span><span class=o>(</span><span class=n>type</span><span class=o>)){</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=k>new</span> <span class=n>ProductA</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=k>new</span> <span class=n>ProductB</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>ProductA</span> <span class=kd>implements</span> <span class=n>Product</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>method1</span><span class=o>(){</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;ProductA.method1 executed..&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>ProductB</span> <span class=kd>implements</span> <span class=n>Product</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>method1</span><span class=o>(){</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;ProductB.method1 executed..&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Application</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Product</span> <span class=nf>createProduct</span><span class=o>(</span><span class=n>String</span> <span class=n>type</span><span class=o>){</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>ProductFactory</span><span class=o>.</span><span class=na>getProduct</span><span class=o>(</span><span class=n>type</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=n>Product</span> <span class=nf>getProduct</span><span class=o>(</span><span class=n>String</span> <span class=n>type</span><span class=o>){</span>
</span></span><span class=line><span class=cl>        <span class=n>Product</span> <span class=n>product</span> <span class=o>=</span> <span class=n>createProduct</span><span class=o>(</span><span class=n>type</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 一系列操作共同的预处理操作。。。
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=k>return</span> <span class=n>product</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h2 id=抽象工厂模式abstract-factory-pattern>抽象工厂模式（Abstract Factory Pattern）<a hidden class=anchor aria-hidden=true href=#抽象工厂模式abstract-factory-pattern>#</a></h2><h3 id=问题背景-1>问题背景<a hidden class=anchor aria-hidden=true href=#问题背景-1>#</a></h3><h3 id=解决方案-1>解决方案<a hidden class=anchor aria-hidden=true href=#解决方案-1>#</a></h3><h3 id=抽象工厂模式代码实现>抽象工厂模式代码实现<a hidden class=anchor aria-hidden=true href=#抽象工厂模式代码实现>#</a></h3><p>本文借助jdk中实现jdbc的原理来描述描述一下抽象工厂模式，首先定义两个抽象接口：连接接口和命令接口。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>interface</span> <span class=nc>IConnect</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>connect</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>interface</span> <span class=nc>ICommand</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>command</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>此时再定义一个数据库操作util用来对数据库进行抽象对数据库进行处理。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>interface</span> <span class=nc>IDatabaseUtils</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>IConnect</span> <span class=nf>getConnect</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>ICommand</span> <span class=nf>getCommand</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>此时如果我们使用mysql作为数据库使用，那么具体实现一下数据库连接接口、数据库命令接口和mysql工具类。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>class</span> <span class=nc>MysqlConnect</span> <span class=kd>implements</span> <span class=n>IConnect</span><span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>connect</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;connect mysql ...&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>MysqlCommand</span> <span class=kd>implements</span> <span class=n>ICommand</span><span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>command</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;mysql command...&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>MysqlUtils</span> <span class=kd>implements</span> <span class=n>IDatabaseUtils</span><span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>IConnect</span> <span class=nf>getConnect</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=n>MysqlConnect</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>ICommand</span> <span class=nf>getCommand</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=n>MysqlCommand</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>假如封装到一个jar包中给所有人使用时，缺少oracle处理工具，我们只需要再具体实现一下数据库连接接口、数据库命令接口和oracle工具类，而不需要去动原有代码</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>class</span> <span class=nc>OracleConnect</span> <span class=kd>implements</span> <span class=n>IConnect</span><span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>connect</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;connect oracle ...&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>OracleCommand</span> <span class=kd>implements</span> <span class=n>ICommand</span><span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>command</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;oracle command...&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>OracleUtils</span> <span class=kd>implements</span> <span class=n>IDatabaseUtils</span><span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>IConnect</span> <span class=nf>getConnect</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=n>OracleConnect</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>ICommand</span> <span class=nf>getCommand</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=n>OracleCommand</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>对于上面的示例代码，我们可以通过下面这种方式简单调用，通过IDatabaseUtils引用而不需要关注被调用的具体实现细节</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>AbstractFactoryTest</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>IDatabaseUtils</span> <span class=n>iDatabaseUtils</span> <span class=o>=</span> <span class=k>new</span> <span class=n>OracleUtils</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// 不再需要关注被调用的具体细节
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>iDatabaseUtils</span><span class=o>.</span><span class=na>getConnect</span><span class=o>().</span><span class=na>connect</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=n>iDatabaseUtils</span><span class=o>.</span><span class=na>getCommand</span><span class=o>().</span><span class=na>command</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>总结：抽象工厂模式就是一种为访问类提供一个创建一组相关或相互依赖对象的接口，且访问类无须指定所要产品的具体类就能得到同族的不同等级的产品的模式结构。优点：1.可以在类的内部对产品族中相关联的多等级产品共同管理，而不必专门引入多个新的类来进行管理；2.当增加一个新的产品族时不需要修改原代码，满足开闭原则。</p><h2 id=单例模式singleton-pattern>单例模式（Singleton Pattern）<a hidden class=anchor aria-hidden=true href=#单例模式singleton-pattern>#</a></h2><h2 id=建造者模式builder-pattern>建造者模式（Builder Pattern）<a hidden class=anchor aria-hidden=true href=#建造者模式builder-pattern>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Product</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>String</span> <span class=n>productName</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>String</span> <span class=n>part1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>String</span> <span class=n>part2</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>Product</span><span class=o>(</span><span class=n>String</span> <span class=n>productName</span><span class=o>,</span> <span class=n>String</span> <span class=n>part1</span><span class=o>,</span> <span class=n>String</span> <span class=n>part2</span><span class=o>){</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>productName</span> <span class=o>=</span> <span class=n>productName</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>part1</span> <span class=o>=</span> <span class=n>part1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>part2</span> <span class=o>=</span> <span class=n>part2</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=kd>static</span> <span class=kd>class</span> <span class=nc>Builder</span><span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>private</span> <span class=n>String</span> <span class=n>productName</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=kd>private</span> <span class=n>String</span> <span class=n>part1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=kd>private</span> <span class=n>String</span> <span class=n>part2</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=kd>public</span> <span class=n>Builder</span> <span class=nf>productName</span><span class=o>(</span><span class=n>String</span> <span class=n>productName</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=o>.</span><span class=na>productName</span> <span class=o>=</span> <span class=n>productName</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=k>this</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kd>public</span> <span class=n>Builder</span> <span class=nf>part1</span><span class=o>(</span><span class=n>String</span> <span class=n>part1</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=o>.</span><span class=na>part1</span> <span class=o>=</span> <span class=n>part1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=k>this</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kd>public</span> <span class=n>Builder</span> <span class=nf>part2</span><span class=o>(</span><span class=n>String</span> <span class=n>part2</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=o>.</span><span class=na>part2</span> <span class=o>=</span> <span class=n>part2</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=k>this</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=kd>public</span> <span class=n>Product</span> <span class=nf>build</span><span class=o>(){</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=k>new</span> <span class=n>Product</span><span class=o>(</span><span class=k>this</span><span class=o>.</span><span class=na>productName</span><span class=o>,</span> <span class=k>this</span><span class=o>.</span><span class=na>part1</span><span class=o>,</span> <span class=k>this</span><span class=o>.</span><span class=na>part2</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>toString</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s>&#34;Product{&#34;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>                <span class=s>&#34;productName=&#39;&#34;</span> <span class=o>+</span> <span class=n>productName</span> <span class=o>+</span> <span class=sc>&#39;\&#39;&#39;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>                <span class=s>&#34;, part1=&#39;&#34;</span> <span class=o>+</span> <span class=n>part1</span> <span class=o>+</span> <span class=sc>&#39;\&#39;&#39;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>                <span class=s>&#34;, part2=&#39;&#34;</span> <span class=o>+</span> <span class=n>part2</span> <span class=o>+</span> <span class=sc>&#39;\&#39;&#39;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>                <span class=sc>&#39;}&#39;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h2 id=原型模式prototype-pattern>原型模式（Prototype Pattern）<a hidden class=anchor aria-hidden=true href=#原型模式prototype-pattern>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * 模型定义：
</span></span></span><span class=line><span class=cl><span class=cm> * 指原型实例指定创建对象的种类，并且通过拷贝这些原型创建新的对象。
</span></span></span><span class=line><span class=cl><span class=cm> *
</span></span></span><span class=line><span class=cl><span class=cm> * @date 2020/3/23 23:11
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>ProtoTypeTest</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=kd>throws</span> <span class=n>CloneNotSupportedException</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Product</span> <span class=n>product</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Product</span><span class=o>(</span><span class=s>&#34;part1&#34;</span><span class=o>,</span> <span class=s>&#34;part2&#34;</span><span class=o>,</span> <span class=s>&#34;part3&#34;</span><span class=o>,</span> <span class=s>&#34;part4&#34;</span><span class=o>,</span> <span class=k>new</span> <span class=n>Part</span><span class=o>(</span><span class=s>&#34;xxx&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>        <span class=n>Product</span> <span class=n>clone</span> <span class=o>=</span> <span class=n>product</span><span class=o>.</span><span class=na>clone</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>product</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>clone</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;---------------对部分数据进行修改----------------&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>clone</span><span class=o>.</span><span class=na>setPart1</span><span class=o>(</span><span class=s>&#34;part1A&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>clone</span><span class=o>.</span><span class=na>getPart</span><span class=o>().</span><span class=na>setName</span><span class=o>(</span><span class=s>&#34;YYY&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>product</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>clone</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Part</span> <span class=kd>implements</span> <span class=n>Cloneable</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>String</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>protected</span> <span class=n>Part</span> <span class=nf>clone</span><span class=o>()</span> <span class=kd>throws</span> <span class=n>CloneNotSupportedException</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=o>(</span><span class=n>Part</span><span class=o>)</span> <span class=kd>super</span><span class=o>.</span><span class=na>clone</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>Part</span><span class=o>(</span><span class=n>String</span> <span class=n>name</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>name</span> <span class=o>=</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>getName</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setName</span><span class=o>(</span><span class=n>String</span> <span class=n>name</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>name</span> <span class=o>=</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>toString</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s>&#34;Part{[&#34;</span> <span class=o>+</span> <span class=n>hashCode</span><span class=o>()</span> <span class=o>+</span> <span class=s>&#34;]&#34;</span><span class=o>+</span>
</span></span><span class=line><span class=cl>                <span class=s>&#34;name=&#39;&#34;</span> <span class=o>+</span> <span class=n>name</span> <span class=o>+</span> <span class=sc>&#39;\&#39;&#39;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>                <span class=sc>&#39;}&#39;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Product</span> <span class=kd>implements</span> <span class=n>Cloneable</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>String</span> <span class=n>part1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=n>String</span> <span class=n>part2</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=n>String</span> <span class=n>part3</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=n>String</span> <span class=n>part4</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>Part</span> <span class=nf>getPart</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>part</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setPart</span><span class=o>(</span><span class=n>Part</span> <span class=n>part</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>part</span> <span class=o>=</span> <span class=n>part</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>Part</span> <span class=n>part</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>Product</span><span class=o>(</span><span class=n>String</span> <span class=n>part1</span><span class=o>,</span> <span class=n>String</span> <span class=n>part2</span><span class=o>,</span> <span class=n>String</span> <span class=n>part3</span><span class=o>,</span> <span class=n>String</span> <span class=n>part4</span><span class=o>,</span><span class=n>Part</span> <span class=n>part</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>part1</span> <span class=o>=</span> <span class=n>part1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>part2</span> <span class=o>=</span> <span class=n>part2</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>part3</span> <span class=o>=</span> <span class=n>part3</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>part4</span> <span class=o>=</span> <span class=n>part4</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>part</span> <span class=o>=</span> <span class=n>part</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>protected</span> <span class=n>Product</span> <span class=nf>clone</span><span class=o>()</span> <span class=kd>throws</span> <span class=n>CloneNotSupportedException</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// 进行深拷贝
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>        <span class=n>Product</span> <span class=n>product</span> <span class=o>=</span> <span class=o>(</span><span class=n>Product</span><span class=o>)</span> <span class=kd>super</span><span class=o>.</span><span class=na>clone</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=n>product</span><span class=o>.</span><span class=na>setPart</span><span class=o>(</span><span class=n>product</span><span class=o>.</span><span class=na>getPart</span><span class=o>().</span><span class=na>clone</span><span class=o>());</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>product</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>getPart1</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>part1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setPart1</span><span class=o>(</span><span class=n>String</span> <span class=n>part1</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>part1</span> <span class=o>=</span> <span class=n>part1</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>getPart2</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>part2</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setPart2</span><span class=o>(</span><span class=n>String</span> <span class=n>part2</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>part2</span> <span class=o>=</span> <span class=n>part2</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>getPart3</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>part3</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setPart3</span><span class=o>(</span><span class=n>String</span> <span class=n>part3</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>part3</span> <span class=o>=</span> <span class=n>part3</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>getPart4</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>part4</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setPart4</span><span class=o>(</span><span class=n>String</span> <span class=n>part4</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>part4</span> <span class=o>=</span> <span class=n>part4</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>toString</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s>&#34;Product{[&#34;</span> <span class=o>+</span> <span class=n>hashCode</span><span class=o>()</span> <span class=o>+</span> <span class=s>&#34;]&#34;</span><span class=o>+</span>
</span></span><span class=line><span class=cl>                <span class=s>&#34;part1=&#39;&#34;</span> <span class=o>+</span> <span class=n>part1</span> <span class=o>+</span> <span class=sc>&#39;\&#39;&#39;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>                <span class=s>&#34;, part2=&#39;&#34;</span> <span class=o>+</span> <span class=n>part2</span> <span class=o>+</span> <span class=sc>&#39;\&#39;&#39;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>                <span class=s>&#34;, part3=&#39;&#34;</span> <span class=o>+</span> <span class=n>part3</span> <span class=o>+</span> <span class=sc>&#39;\&#39;&#39;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>                <span class=s>&#34;, part4=&#39;&#34;</span> <span class=o>+</span> <span class=n>part4</span> <span class=o>+</span> <span class=sc>&#39;\&#39;&#39;</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>                <span class=s>&#34;, part=&#34;</span> <span class=o>+</span> <span class=n>part</span> <span class=o>+</span>
</span></span><span class=line><span class=cl>                <span class=sc>&#39;}&#39;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h1 id=结构型模式>结构型模式<a hidden class=anchor aria-hidden=true href=#结构型模式>#</a></h1><h2 id=适配器模式adapter-pattern>适配器模式（Adapter Pattern）<a hidden class=anchor aria-hidden=true href=#适配器模式adapter-pattern>#</a></h2><h2 id=桥接模式bridge-pattern>桥接模式（Bridge Pattern）<a hidden class=anchor aria-hidden=true href=#桥接模式bridge-pattern>#</a></h2><h2 id=过滤器模式filtercriteria-pattern>过滤器模式（Filter、Criteria Pattern）<a hidden class=anchor aria-hidden=true href=#过滤器模式filtercriteria-pattern>#</a></h2><h2 id=组合模式composite-pattern>组合模式（Composite Pattern）<a hidden class=anchor aria-hidden=true href=#组合模式composite-pattern>#</a></h2><h2 id=装饰器模式decorator-pattern>装饰器模式（Decorator Pattern）<a hidden class=anchor aria-hidden=true href=#装饰器模式decorator-pattern>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * 装饰者模式：扩展一个类的功能或给一个类附加职责
</span></span></span><span class=line><span class=cl><span class=cm> *
</span></span></span><span class=line><span class=cl><span class=cm> * 优点：
</span></span></span><span class=line><span class=cl><span class=cm> * 在不改变原有对象的基础上给一个对象扩展功能
</span></span></span><span class=line><span class=cl><span class=cm> * 使用不同的组合可以实现不同的效果
</span></span></span><span class=line><span class=cl><span class=cm> * 符合开闭原则
</span></span></span><span class=line><span class=cl><span class=cm> *
</span></span></span><span class=line><span class=cl><span class=cm> *
</span></span></span><span class=line><span class=cl><span class=cm> * @author lin.luo@hand-china.com
</span></span></span><span class=line><span class=cl><span class=cm> * @date 2020/3/31 0:11
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>DecoratorTest</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Component</span> <span class=n>component</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ConcreteComponent</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=c1>//        component.operation();
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=c1>// 在原有的基础上添加功能
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>component</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ConcreteDecorator1</span><span class=o>(</span><span class=n>component</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=c1>//        component.operation();
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=n>component</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ConcreteDecorator2</span><span class=o>(</span><span class=n>component</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>component</span><span class=o>.</span><span class=na>operation</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>interface</span> <span class=nc>Component</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>operation</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>ConcreteComponent</span> <span class=kd>implements</span> <span class=n>Component</span><span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>operation</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;拍照&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>abstract</span> <span class=kd>class</span> <span class=nc>Decorator</span> <span class=kd>implements</span> <span class=n>Component</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Component</span> <span class=n>component</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>Decorator</span><span class=o>(</span><span class=n>Component</span> <span class=n>component</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>component</span> <span class=o>=</span> <span class=n>component</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>ConcreteDecorator1</span> <span class=kd>extends</span> <span class=n>Decorator</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>ConcreteDecorator1</span><span class=o>(</span><span class=n>Component</span> <span class=n>component</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>super</span><span class=o>(</span><span class=n>component</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>operation</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>component</span><span class=o>.</span><span class=na>operation</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;美颜&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>ConcreteDecorator2</span> <span class=kd>extends</span> <span class=n>Decorator</span><span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>ConcreteDecorator2</span><span class=o>(</span><span class=n>Component</span> <span class=n>component</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>super</span><span class=o>(</span><span class=n>component</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>operation</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>component</span><span class=o>.</span><span class=na>operation</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;滤镜&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h2 id=享元模式flyweight-pattern>享元模式（Flyweight Pattern）<a hidden class=anchor aria-hidden=true href=#享元模式flyweight-pattern>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * 享元模式：运用共享技术有效地支持大量细粒度的对象
</span></span></span><span class=line><span class=cl><span class=cm> * 借助全局变量完成对对象的共享
</span></span></span><span class=line><span class=cl><span class=cm> * 对于大量相同的对象，可以节省系统内存
</span></span></span><span class=line><span class=cl><span class=cm> *
</span></span></span><span class=line><span class=cl><span class=cm> * @date 2020/3/30 23:58
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>FlyWeightTest</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>TreeNode</span> <span class=n>treeNode1</span> <span class=o>=</span> <span class=k>new</span> <span class=n>TreeNode</span><span class=o>(</span><span class=mi>3</span><span class=o>,</span> <span class=mi>4</span><span class=o>,</span> <span class=n>TreeFactory</span><span class=o>.</span><span class=na>getTree</span><span class=o>(</span><span class=s>&#34;A&#34;</span><span class=o>,</span> <span class=s>&#34;XXXX&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>        <span class=n>TreeNode</span> <span class=n>treeNode2</span> <span class=o>=</span> <span class=k>new</span> <span class=n>TreeNode</span><span class=o>(</span><span class=mi>3</span><span class=o>,</span> <span class=mi>4</span><span class=o>,</span> <span class=n>TreeFactory</span><span class=o>.</span><span class=na>getTree</span><span class=o>(</span><span class=s>&#34;A&#34;</span><span class=o>,</span> <span class=s>&#34;XXXX&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>        <span class=n>TreeNode</span> <span class=n>treeNode3</span> <span class=o>=</span> <span class=k>new</span> <span class=n>TreeNode</span><span class=o>(</span><span class=mi>3</span><span class=o>,</span> <span class=mi>4</span><span class=o>,</span> <span class=n>TreeFactory</span><span class=o>.</span><span class=na>getTree</span><span class=o>(</span><span class=s>&#34;B&#34;</span><span class=o>,</span> <span class=s>&#34;XXXX&#34;</span><span class=o>));</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>TreeFactory</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kd>static</span> <span class=n>HashMap</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span> <span class=n>Tree</span><span class=o>&gt;</span> <span class=n>map</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HashMap</span><span class=o>&lt;&gt;();</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=n>Tree</span> <span class=nf>getTree</span><span class=o>(</span><span class=n>String</span> <span class=n>name</span><span class=o>,</span> <span class=n>String</span> <span class=n>data</span><span class=o>){</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=o>(</span><span class=n>map</span><span class=o>.</span><span class=na>containsKey</span><span class=o>(</span><span class=n>name</span><span class=o>)){</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>map</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>name</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=n>Tree</span> <span class=n>tree</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Tree</span><span class=o>(</span><span class=n>name</span><span class=o>,</span> <span class=n>data</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>map</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=n>name</span><span class=o>,</span> <span class=n>tree</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>tree</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>TreeNode</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>int</span> <span class=n>x</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>int</span> <span class=n>y</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>Tree</span> <span class=n>tree</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>TreeNode</span><span class=o>(</span><span class=kt>int</span> <span class=n>x</span><span class=o>,</span> <span class=kt>int</span> <span class=n>y</span><span class=o>,</span> <span class=n>Tree</span> <span class=n>tree</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>x</span> <span class=o>=</span> <span class=n>x</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>y</span> <span class=o>=</span> <span class=n>y</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>tree</span> <span class=o>=</span> <span class=n>tree</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Tree</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>String</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>String</span> <span class=n>data</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>Tree</span><span class=o>(</span><span class=n>String</span> <span class=n>name</span><span class=o>,</span> <span class=n>String</span> <span class=n>data</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>name</span> <span class=o>=</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>data</span> <span class=o>=</span> <span class=n>data</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;create tree&#34;</span><span class=o>+</span><span class=n>name</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>getName</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>name</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>getData</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>data</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h2 id=代理模式proxy-pattern>代理模式（Proxy Pattern）<a hidden class=anchor aria-hidden=true href=#代理模式proxy-pattern>#</a></h2><h2 id=门面模式facade-pattern>门面模式（Facade Pattern）<a hidden class=anchor aria-hidden=true href=#门面模式facade-pattern>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>FacadeTest</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>new</span> <span class=n>Facade</span><span class=o>().</span><span class=na>facadeDoSomething</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>client</span><span class=o>{</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Facade</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>facadeDoSomething</span><span class=o>(){</span>
</span></span><span class=line><span class=cl>        <span class=k>new</span> <span class=n>SubSystem1</span><span class=o>().</span><span class=na>method1</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=k>new</span> <span class=n>SubSystem2</span><span class=o>().</span><span class=na>method2</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=k>new</span> <span class=n>SubSystem3</span><span class=o>().</span><span class=na>method3</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>SubSystem1</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>method1</span><span class=o>(){</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;sub system1 method1&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>SubSystem2</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>method2</span><span class=o>(){</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;sub system2 method2&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>SubSystem3</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>method3</span><span class=o>(){</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;sub system3 method3&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h1 id=行为型模式>行为型模式<a hidden class=anchor aria-hidden=true href=#行为型模式>#</a></h1><h2 id=责任链模式chain-of-responsibility-pattern>责任链模式（Chain of Responsibility Pattern）<a hidden class=anchor aria-hidden=true href=#责任链模式chain-of-responsibility-pattern>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Request</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>boolean</span> <span class=n>loggedOn</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>boolean</span> <span class=n>frequentOk</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>boolean</span> <span class=n>isPermits</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kt>boolean</span> <span class=n>containsSensitiveWords</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>String</span> <span class=n>requestBody</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>Request</span><span class=o>(</span><span class=kt>boolean</span> <span class=n>loggedOn</span><span class=o>,</span> <span class=kt>boolean</span> <span class=n>frequentOk</span><span class=o>,</span> <span class=kt>boolean</span> <span class=n>isPermits</span><span class=o>,</span> <span class=kt>boolean</span> <span class=n>containsSensitiveWords</span><span class=o>,</span> <span class=n>String</span> <span class=n>requestBody</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>loggedOn</span> <span class=o>=</span> <span class=n>loggedOn</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>frequentOk</span> <span class=o>=</span> <span class=n>frequentOk</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>isPermits</span> <span class=o>=</span> <span class=n>isPermits</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>containsSensitiveWords</span> <span class=o>=</span> <span class=n>containsSensitiveWords</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>requestBody</span> <span class=o>=</span> <span class=n>requestBody</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>isLoggedOn</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>loggedOn</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setLoggedOn</span><span class=o>(</span><span class=kt>boolean</span> <span class=n>loggedOn</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>loggedOn</span> <span class=o>=</span> <span class=n>loggedOn</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>isFrequentOk</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>frequentOk</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setFrequentOk</span><span class=o>(</span><span class=kt>boolean</span> <span class=n>frequentOk</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>frequentOk</span> <span class=o>=</span> <span class=n>frequentOk</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>isPermits</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>isPermits</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setPermits</span><span class=o>(</span><span class=kt>boolean</span> <span class=n>permits</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>isPermits</span> <span class=o>=</span> <span class=n>permits</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>isContainsSensitiveWords</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>containsSensitiveWords</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setContainsSensitiveWords</span><span class=o>(</span><span class=kt>boolean</span> <span class=n>containsSensitiveWords</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>containsSensitiveWords</span> <span class=o>=</span> <span class=n>containsSensitiveWords</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>String</span> <span class=nf>getRequestBody</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>requestBody</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setRequestBody</span><span class=o>(</span><span class=n>String</span> <span class=n>requestBody</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>requestBody</span> <span class=o>=</span> <span class=n>requestBody</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>abstract</span> <span class=kd>class</span> <span class=nc>Handler</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Handler</span> <span class=n>next</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>Handler</span><span class=o>(</span><span class=n>Handler</span> <span class=n>next</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>next</span> <span class=o>=</span> <span class=n>next</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>Handler</span> <span class=nf>getNext</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>next</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setNext</span><span class=o>(</span><span class=n>Handler</span> <span class=n>next</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>next</span> <span class=o>=</span> <span class=n>next</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=kd>abstract</span> <span class=kt>boolean</span> <span class=nf>process</span><span class=o>(</span><span class=n>Request</span> <span class=n>request</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>FequentOkHandler</span> <span class=kd>extends</span> <span class=n>Handler</span><span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>FequentOkHandler</span><span class=o>(</span><span class=n>Handler</span> <span class=n>next</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>super</span><span class=o>(</span><span class=n>next</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span> <span class=nf>process</span><span class=o>(</span><span class=n>Request</span> <span class=n>request</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=s>&#34;访问频率控制:&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=o>(</span><span class=n>request</span><span class=o>.</span><span class=na>isFrequentOk</span><span class=o>()){</span>
</span></span><span class=line><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;ok&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=n>Handler</span> <span class=n>next</span> <span class=o>=</span> <span class=n>getNext</span><span class=o>();</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span><span class=o>(</span><span class=n>next</span> <span class=o>==</span> <span class=kc>null</span><span class=o>){</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span><span class=o>(!</span><span class=n>next</span><span class=o>.</span><span class=na>process</span><span class=o>(</span><span class=n>request</span><span class=o>)){</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;error&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>IsPermitsHandler</span> <span class=kd>extends</span> <span class=n>Handler</span><span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>IsPermitsHandler</span><span class=o>(</span><span class=n>Handler</span> <span class=n>next</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>super</span><span class=o>(</span><span class=n>next</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span> <span class=nf>process</span><span class=o>(</span><span class=n>Request</span> <span class=n>request</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=s>&#34;权限访问控制:&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=o>(</span><span class=n>request</span><span class=o>.</span><span class=na>isPermits</span><span class=o>()){</span>
</span></span><span class=line><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;ok&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=n>Handler</span> <span class=n>next</span> <span class=o>=</span> <span class=n>getNext</span><span class=o>();</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span><span class=o>(</span><span class=n>next</span> <span class=o>==</span> <span class=kc>null</span><span class=o>){</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span><span class=o>(!</span><span class=n>next</span><span class=o>.</span><span class=na>process</span><span class=o>(</span><span class=n>request</span><span class=o>)){</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;error&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>LoggedOnHandler</span> <span class=kd>extends</span> <span class=n>Handler</span><span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>LoggedOnHandler</span><span class=o>(</span><span class=n>Handler</span> <span class=n>next</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>super</span><span class=o>(</span><span class=n>next</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span> <span class=nf>process</span><span class=o>(</span><span class=n>Request</span> <span class=n>request</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=s>&#34;登录权限控制:&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=o>(</span><span class=n>request</span><span class=o>.</span><span class=na>isLoggedOn</span><span class=o>()){</span>
</span></span><span class=line><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;ok&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=n>Handler</span> <span class=n>next</span> <span class=o>=</span> <span class=n>getNext</span><span class=o>();</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span><span class=o>(</span><span class=n>next</span> <span class=o>==</span> <span class=kc>null</span><span class=o>){</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span><span class=o>(!</span><span class=n>next</span><span class=o>.</span><span class=na>process</span><span class=o>(</span><span class=n>request</span><span class=o>)){</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;error&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>ContainsSensitiveWordsHandler</span> <span class=kd>extends</span> <span class=n>Handler</span><span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>ContainsSensitiveWordsHandler</span><span class=o>(</span><span class=n>Handler</span> <span class=n>next</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>super</span><span class=o>(</span><span class=n>next</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span> <span class=nf>process</span><span class=o>(</span><span class=n>Request</span> <span class=n>request</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>print</span><span class=o>(</span><span class=s>&#34;敏感词权限控制:&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=o>(</span><span class=n>request</span><span class=o>.</span><span class=na>isContainsSensitiveWords</span><span class=o>()){</span>
</span></span><span class=line><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;ok&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>            <span class=n>Handler</span> <span class=n>next</span> <span class=o>=</span> <span class=n>getNext</span><span class=o>();</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span><span class=o>(</span><span class=n>next</span> <span class=o>==</span> <span class=kc>null</span><span class=o>){</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span><span class=o>(!</span><span class=n>next</span><span class=o>.</span><span class=na>process</span><span class=o>(</span><span class=n>request</span><span class=o>)){</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=kc>true</span><span class=o>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;error&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=kc>false</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>ChainOfResponsibilityTest</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Request</span> <span class=n>request</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Request</span><span class=o>(</span><span class=kc>true</span><span class=o>,</span> <span class=kc>true</span><span class=o>,</span> <span class=kc>false</span><span class=o>,</span> <span class=kc>true</span><span class=o>,</span> <span class=s>&#34;hha&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>Handler</span> <span class=n>handler</span> <span class=o>=</span> <span class=k>new</span> <span class=n>FequentOkHandler</span><span class=o>(</span><span class=k>new</span> <span class=n>LoggedOnHandler</span><span class=o>(</span><span class=k>new</span> <span class=n>ContainsSensitiveWordsHandler</span><span class=o>(</span><span class=k>new</span> <span class=n>IsPermitsHandler</span><span class=o>(</span><span class=kc>null</span><span class=o>))));</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=o>(</span><span class=n>handler</span><span class=o>.</span><span class=na>process</span><span class=o>(</span><span class=n>request</span><span class=o>)){</span>
</span></span><span class=line><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;开始进行业务处理&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span><span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;请求异常&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h2 id=命令模式command-pattern>命令模式（Command Pattern）<a hidden class=anchor aria-hidden=true href=#命令模式command-pattern>#</a></h2><h2 id=解释器模式interpreter-pattern>解释器模式（Interpreter Pattern）<a hidden class=anchor aria-hidden=true href=#解释器模式interpreter-pattern>#</a></h2><h2 id=迭代器模式iterator-pattern>迭代器模式（Iterator Pattern）<a hidden class=anchor aria-hidden=true href=#迭代器模式iterator-pattern>#</a></h2><p>迭代器模式是一种用于顺序访问集合对象的元素，但是不需要知道集合对象的底层表示的模式。主要目的是在不暴露聚合对象的内部结构的情况下，让外部代码透明地访问聚合的内部数据。</p><p>迭代器模式主要包含以下角色。</p><ol><li>抽象聚合（Container）角色：定义存储、添加、删除聚合对象以及创建迭代器对象的接口。</li><li>具体聚合（MyRepository）角色：实现抽象聚合类，返回一个具体迭代器的实例。</li><li>抽象迭代器（Iterator）角色：定义访问和遍历聚合元素的接口，通常包含 hasNext()、next() 等方法。</li><li>具体迭代器（MyIterator）角色：实现抽象迭代器接口中所定义的方法，完成对聚合对象的遍历，记录遍历的当前位置。</li></ol><p>类图表示如下；<div class=post-img-view><a data-fancybox=gallery href=https://cdn.jsdelivr.net/gh/luolin1024/image@main/img/1602230271244-92c98753-4c64-46f1-aabc-eddaf6a58116.png><img src=https://cdn.jsdelivr.net/gh/luolin1024/image@main/img/1602230271244-92c98753-4c64-46f1-aabc-eddaf6a58116.png alt=MyRepository.png></a></div>具体实现代码：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * 接口容器
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>interface</span> <span class=nc>Container</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Iterator</span> <span class=nf>getIterator</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * 接口迭代器
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>interface</span> <span class=nc>Iterator</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>boolean</span> <span class=nf>hasNext</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=n>Object</span> <span class=nf>next</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * 具体容器
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>MyRepository</span> <span class=kd>implements</span> <span class=n>Container</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>Object</span> <span class=n>arr</span><span class=o>[]</span> <span class=o>=</span> <span class=o>{</span><span class=s>&#34;a&#34;</span><span class=o>,</span> <span class=s>&#34;b&#34;</span><span class=o>,</span> <span class=s>&#34;c&#34;</span><span class=o>};</span>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>Iterator</span> <span class=nf>getIterator</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>new</span> <span class=n>MyIterator</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>     * 具体迭代器
</span></span></span><span class=line><span class=cl><span class=cm>     */</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=kd>class</span> <span class=nc>MyIterator</span> <span class=kd>implements</span> <span class=n>Iterator</span><span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>index</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>        <span class=kd>public</span> <span class=kt>boolean</span> <span class=nf>hasNext</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=n>index</span> <span class=o>&lt;</span> <span class=n>arr</span><span class=o>.</span><span class=na>length</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>        <span class=kd>public</span> <span class=n>Object</span> <span class=nf>next</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span><span class=o>(</span><span class=k>this</span><span class=o>.</span><span class=na>hasNext</span><span class=o>()){</span>
</span></span><span class=line><span class=cl>                <span class=k>return</span> <span class=n>arr</span><span class=o>[</span><span class=n>index</span><span class=o>++];</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=kc>null</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * 测试类
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>IteratorTest</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Container</span> <span class=n>container</span> <span class=o>=</span> <span class=k>new</span> <span class=n>MyRepository</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=n>Iterator</span> <span class=n>iterator</span> <span class=o>=</span> <span class=n>container</span><span class=o>.</span><span class=na>getIterator</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span> <span class=o>(</span><span class=n>iterator</span><span class=o>.</span><span class=na>hasNext</span><span class=o>()){</span>
</span></span><span class=line><span class=cl>            <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=n>iterator</span><span class=o>.</span><span class=na>next</span><span class=o>());</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h2 id=中介者模式mediator-pattern>中介者模式（Mediator Pattern）<a hidden class=anchor aria-hidden=true href=#中介者模式mediator-pattern>#</a></h2><h2 id=备忘录模式memento-pattern>备忘录模式（Memento Pattern）<a hidden class=anchor aria-hidden=true href=#备忘录模式memento-pattern>#</a></h2><h2 id=观察者模式observer-pattern>观察者模式（Observer Pattern）<a hidden class=anchor aria-hidden=true href=#观察者模式observer-pattern>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kn>package</span> <span class=nn>com.lin.observe_pattern</span><span class=o>;</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.ArrayList</span><span class=o>;</span>  
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.HashMap</span><span class=o>;</span>  
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.List</span><span class=o>;</span>  
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>java.util.Map</span><span class=o>;</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>ObservePatternTest</span> <span class=o>{</span>  
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>  
</span></span><span class=line><span class=cl>        <span class=n>EventManager</span> <span class=n>eventManager</span> <span class=o>=</span> <span class=k>new</span> <span class=n>EventManager</span><span class=o>(</span><span class=s>&#34;A&#34;</span><span class=o>,</span> <span class=s>&#34;B&#34;</span><span class=o>);</span>  
</span></span><span class=line><span class=cl>        <span class=n>eventManager</span><span class=o>.</span><span class=na>subscribe</span><span class=o>(</span><span class=s>&#34;A&#34;</span><span class=o>,</span> <span class=k>new</span> <span class=n>ListenerA</span><span class=o>());</span>  
</span></span><span class=line><span class=cl>        <span class=n>eventManager</span><span class=o>.</span><span class=na>subscribe</span><span class=o>(</span><span class=s>&#34;A&#34;</span><span class=o>,</span> <span class=k>new</span> <span class=n>ListenerB</span><span class=o>());</span>  
</span></span><span class=line><span class=cl>        <span class=n>eventManager</span><span class=o>.</span><span class=na>subscribe</span><span class=o>(</span><span class=s>&#34;B&#34;</span><span class=o>,</span> <span class=k>new</span> <span class=n>ListenerA</span><span class=o>());</span>  
</span></span><span class=line><span class=cl>        <span class=n>eventManager</span><span class=o>.</span><span class=na>subscribe</span><span class=o>(</span><span class=s>&#34;B&#34;</span><span class=o>,</span> <span class=k>new</span> <span class=n>ListenerB</span><span class=o>());</span>  
</span></span><span class=line><span class=cl>        <span class=n>eventManager</span><span class=o>.</span><span class=na>notify</span><span class=o>(</span><span class=s>&#34;B&#34;</span><span class=o>,</span> <span class=s>&#34;改变世界&#34;</span><span class=o>);</span>  
</span></span><span class=line><span class=cl>    <span class=o>}</span>  
</span></span><span class=line><span class=cl><span class=o>}</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>EventManager</span><span class=o>{</span>  
</span></span><span class=line><span class=cl>    <span class=n>Map</span><span class=o>&lt;</span><span class=n>String</span><span class=o>,</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>EventListener</span><span class=o>&gt;&gt;</span> <span class=n>listeners</span> <span class=o>=</span> <span class=k>new</span> <span class=n>HashMap</span><span class=o>&lt;&gt;();</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>EventManager</span><span class=o>(</span><span class=n>String</span><span class=o>...</span> <span class=n>operations</span><span class=o>)</span> <span class=o>{</span>  
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=n>String</span> <span class=n>operation</span> <span class=o>:</span> <span class=n>operations</span><span class=o>)</span> <span class=o>{</span>  
</span></span><span class=line><span class=cl>            <span class=k>this</span><span class=o>.</span><span class=na>listeners</span><span class=o>.</span><span class=na>put</span><span class=o>(</span><span class=n>operation</span><span class=o>,</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;&gt;());</span>  
</span></span><span class=line><span class=cl>        <span class=o>}</span>  
</span></span><span class=line><span class=cl>    <span class=o>}</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>subscribe</span><span class=o>(</span><span class=n>String</span> <span class=n>eventType</span><span class=o>,</span> <span class=n>EventListener</span> <span class=n>listener</span><span class=o>)</span> <span class=o>{</span>  
</span></span><span class=line><span class=cl>        <span class=n>List</span><span class=o>&lt;</span><span class=n>EventListener</span><span class=o>&gt;</span> <span class=n>users</span> <span class=o>=</span> <span class=n>listeners</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>eventType</span><span class=o>);</span>  
</span></span><span class=line><span class=cl>        <span class=n>users</span><span class=o>.</span><span class=na>add</span><span class=o>(</span><span class=n>listener</span><span class=o>);</span>  
</span></span><span class=line><span class=cl>    <span class=o>}</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>unsubscribe</span><span class=o>(</span><span class=n>String</span> <span class=n>eventType</span><span class=o>,</span> <span class=n>EventListener</span> <span class=n>listener</span><span class=o>)</span> <span class=o>{</span>  
</span></span><span class=line><span class=cl>        <span class=n>List</span><span class=o>&lt;</span><span class=n>EventListener</span><span class=o>&gt;</span> <span class=n>users</span> <span class=o>=</span> <span class=n>listeners</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>eventType</span><span class=o>);</span>  
</span></span><span class=line><span class=cl>        <span class=n>users</span><span class=o>.</span><span class=na>remove</span><span class=o>(</span><span class=n>listener</span><span class=o>);</span>  
</span></span><span class=line><span class=cl>    <span class=o>}</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>notify</span><span class=o>(</span><span class=n>String</span> <span class=n>eventType</span><span class=o>,</span> <span class=n>String</span> <span class=n>msg</span><span class=o>)</span> <span class=o>{</span>  
</span></span><span class=line><span class=cl>        <span class=n>List</span><span class=o>&lt;</span><span class=n>EventListener</span><span class=o>&gt;</span> <span class=n>users</span> <span class=o>=</span> <span class=n>listeners</span><span class=o>.</span><span class=na>get</span><span class=o>(</span><span class=n>eventType</span><span class=o>);</span>  
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=o>(</span><span class=n>EventListener</span> <span class=n>listener</span> <span class=o>:</span> <span class=n>users</span><span class=o>)</span> <span class=o>{</span>  
</span></span><span class=line><span class=cl>            <span class=n>listener</span><span class=o>.</span><span class=na>comsumer</span><span class=o>(</span><span class=n>eventType</span><span class=o>,</span> <span class=n>msg</span><span class=o>);</span>  
</span></span><span class=line><span class=cl>        <span class=o>}</span>  
</span></span><span class=line><span class=cl>    <span class=o>}</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=o>}</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=cm>/**  
</span></span></span><span class=line><span class=cl><span class=cm> * 通用观察者接口,定义comsumer方法，消费通知的消息  
</span></span></span><span class=line><span class=cl><span class=cm> */</span>  
</span></span><span class=line><span class=cl><span class=kd>interface</span> <span class=nc>EventListener</span><span class=o>{</span>  
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>comsumer</span><span class=o>(</span><span class=n>String</span> <span class=n>eventType</span><span class=o>,</span> <span class=n>String</span> <span class=n>msg</span><span class=o>);</span>  
</span></span><span class=line><span class=cl><span class=o>}</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>ListenerA</span> <span class=kd>implements</span> <span class=n>EventListener</span><span class=o>{</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>  
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>comsumer</span><span class=o>(</span><span class=n>String</span> <span class=n>eventType</span><span class=o>,</span> <span class=n>String</span> <span class=n>msg</span><span class=o>)</span> <span class=o>{</span>  
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;ListenerA收到通知:&#34;</span><span class=o>+</span><span class=n>eventType</span><span class=o>+</span><span class=s>&#34;-&#34;</span><span class=o>+</span><span class=n>msg</span><span class=o>+</span><span class=s>&#34;,准备xxx&#34;</span><span class=o>);</span>  
</span></span><span class=line><span class=cl>    <span class=o>}</span>  
</span></span><span class=line><span class=cl><span class=o>}</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>ListenerB</span> <span class=kd>implements</span> <span class=n>EventListener</span><span class=o>{</span>  
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>  
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>comsumer</span><span class=o>(</span><span class=n>String</span> <span class=n>eventType</span><span class=o>,</span> <span class=n>String</span> <span class=n>msg</span><span class=o>)</span> <span class=o>{</span>  
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;ListenerB收到通知:&#34;</span><span class=o>+</span><span class=n>eventType</span><span class=o>+</span><span class=s>&#34;-&#34;</span><span class=o>+</span><span class=n>msg</span><span class=o>+</span><span class=s>&#34;,准备yyy&#34;</span><span class=o>);</span>  
</span></span><span class=line><span class=cl>    <span class=o>}</span>  
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h2 id=状态模式state-pattern>状态模式（State Pattern）<a hidden class=anchor aria-hidden=true href=#状态模式state-pattern>#</a></h2><h2 id=空对象模式null-object-pattern>空对象模式（Null Object Pattern）<a hidden class=anchor aria-hidden=true href=#空对象模式null-object-pattern>#</a></h2><h2 id=策略模式strategy-pattern>策略模式（Strategy Pattern）<a hidden class=anchor aria-hidden=true href=#策略模式strategy-pattern>#</a></h2><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>StrategyTest</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>Animal</span> <span class=n>dog</span> <span class=o>=</span> <span class=k>new</span> <span class=n>Dog</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=n>dog</span><span class=o>.</span><span class=na>move</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=n>dog</span><span class=o>.</span><span class=na>setMoveable</span><span class=o>(</span><span class=k>new</span> <span class=n>DogMove</span><span class=o>());</span>
</span></span><span class=line><span class=cl>        <span class=n>dog</span><span class=o>.</span><span class=na>move</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>interface</span> <span class=nc>Moveable</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>move</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>interface</span> <span class=nc>Attackable</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>attack</span><span class=o>();</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Runable</span> <span class=kd>implements</span> <span class=n>Moveable</span><span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>move</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;------ run -----&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>DogMove</span> <span class=kd>implements</span> <span class=n>Moveable</span><span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>move</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;狗摇着尾巴移动&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>abstract</span> <span class=kd>class</span> <span class=nc>Animal</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Moveable</span> <span class=n>moveable</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=n>Attackable</span> <span class=n>attackable</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>Animal</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>Animal</span><span class=o>(</span><span class=n>Moveable</span> <span class=n>moveable</span><span class=o>,</span> <span class=n>Attackable</span> <span class=n>attackable</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>moveable</span> <span class=o>=</span> <span class=n>moveable</span><span class=o>;</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>attackable</span> <span class=o>=</span> <span class=n>attackable</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>abstract</span> <span class=kd>public</span> <span class=kt>void</span> <span class=nf>display</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=kd>abstract</span> <span class=kt>void</span> <span class=nf>move</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=kd>abstract</span> <span class=kt>void</span> <span class=nf>attack</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>Moveable</span> <span class=nf>getMoveable</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>moveable</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setMoveable</span><span class=o>(</span><span class=n>Moveable</span> <span class=n>moveable</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>moveable</span> <span class=o>=</span> <span class=n>moveable</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=n>Attackable</span> <span class=nf>getAttackable</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>attackable</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>setAttackable</span><span class=o>(</span><span class=n>Attackable</span> <span class=n>attackable</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>.</span><span class=na>attackable</span> <span class=o>=</span> <span class=n>attackable</span><span class=o>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>Dog</span> <span class=kd>extends</span> <span class=n>Animal</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>Dog</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>super</span><span class=o>(</span><span class=k>new</span> <span class=n>Runable</span><span class=o>(),</span> <span class=kc>null</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=nf>Dog</span><span class=o>(</span><span class=n>Moveable</span> <span class=n>moveable</span><span class=o>,</span> <span class=n>Attackable</span> <span class=n>attackable</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>super</span><span class=o>(</span><span class=n>moveable</span><span class=o>,</span> <span class=n>attackable</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>display</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;------ 狗 ----------&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>move</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>moveable</span><span class=o>.</span><span class=na>move</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>attack</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>attackable</span><span class=o>.</span><span class=na>attack</span><span class=o>();</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h2 id=模板模式template-pattern>模板模式（Template Pattern）<a hidden class=anchor aria-hidden=true href=#模板模式template-pattern>#</a></h2><p>模板方法模式的目的就是在不改变现有类的算法结构下，将一些具体步骤延迟到子类中，</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * 模式定义：
</span></span></span><span class=line><span class=cl><span class=cm> * 定义一个操作的算法骨架，而将一些步骤延迟到子类中。
</span></span></span><span class=line><span class=cl><span class=cm> * Template Method 使得子类可以不改变一个算法的结构即可重定义该算法的某些特定步骤
</span></span></span><span class=line><span class=cl><span class=cm> *
</span></span></span><span class=line><span class=cl><span class=cm> * Servlet Api &amp; Spring中的应用
</span></span></span><span class=line><span class=cl><span class=cm> * javax.servlet.http.HttpServlet
</span></span></span><span class=line><span class=cl><span class=cm> * org.springframework.web.servlet.mvc.AbstractController
</span></span></span><span class=line><span class=cl><span class=cm> *
</span></span></span><span class=line><span class=cl><span class=cm> * @author 2493468168@qq.com
</span></span></span><span class=line><span class=cl><span class=cm> * @date 2020/3/22 14:55
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>TemplateMethodTest</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kd>static</span> <span class=kt>void</span> <span class=nf>main</span><span class=o>(</span><span class=n>String</span><span class=o>[]</span> <span class=n>args</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>AbstractClass</span> <span class=n>abstractClass</span> <span class=o>=</span> <span class=k>new</span> <span class=n>SubClass</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=n>abstractClass</span><span class=o>.</span><span class=na>operate</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;--------------&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>AbstractClass</span> <span class=n>abstractClass2</span> <span class=o>=</span> <span class=k>new</span> <span class=n>SubClass2</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=n>abstractClass2</span><span class=o>.</span><span class=na>operate</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm>         * pre...
</span></span></span><span class=line><span class=cl><span class=cm>         * step1..
</span></span></span><span class=line><span class=cl><span class=cm>         * templateMethod1()
</span></span></span><span class=line><span class=cl><span class=cm>         * step final...
</span></span></span><span class=line><span class=cl><span class=cm>         * --------------
</span></span></span><span class=line><span class=cl><span class=cm>         * pre...
</span></span></span><span class=line><span class=cl><span class=cm>         * step1..
</span></span></span><span class=line><span class=cl><span class=cm>         * templateMethod2()
</span></span></span><span class=line><span class=cl><span class=cm>         * step final...
</span></span></span><span class=line><span class=cl><span class=cm>         */</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>abstract</span> <span class=kd>class</span> <span class=nc>AbstractClass</span><span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>public</span> <span class=kt>void</span> <span class=nf>operate</span><span class=o>(){</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;pre...&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;step1..&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>        <span class=n>templateMethod</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;step final...&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=kd>abstract</span> <span class=kt>void</span> <span class=nf>templateMethod</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>SubClass</span> <span class=kd>extends</span> <span class=n>AbstractClass</span><span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>templateMethod</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;templateMethod1()&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=kd>class</span> <span class=nc>SubClass2</span> <span class=kd>extends</span> <span class=n>AbstractClass</span><span class=o>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Override</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>templateMethod</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=n>System</span><span class=o>.</span><span class=na>out</span><span class=o>.</span><span class=na>println</span><span class=o>(</span><span class=s>&#34;templateMethod2()&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><h2 id=访问者模式visitor-pattern>访问者模式（Visitor Pattern）<a hidden class=anchor aria-hidden=true href=#访问者模式visitor-pattern>#</a></h2><p>参考资料：
<a href=https://refactoringguru.cn/design-patterns/catalog>设计模式目录：22种设计模式 (refactoringguru.cn)</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://luolin1024.github.io/tags/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/>Java/设计模式</a></li></ul><nav class=paginav><a class=prev href=https://luolin1024.github.io/blog_prepublish/%E9%9D%A2%E8%AF%95/java/><span class=title>« Prev</span><br><span>Java知识</span></a>
<a class=next href=https://luolin1024.github.io/blog_prepublish/%E6%8A%80%E6%9C%AF%E6%8F%90%E5%8D%87/java/hashtable/><span class=title>Next »</span><br><span>HashTable</span></a></nav><div class=related-posts><h2>相关文章</h2><ul><li>· <a href=/blog_prepublish/%E6%8A%80%E6%9C%AF%E6%8F%90%E5%8D%87/java/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%A9%E7%94%A8%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F%E5%92%8C%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%E4%BC%98%E5%8C%96%E4%BB%A3%E7%A0%81%E4%B8%AD%E8%BF%87%E5%A4%9A%E7%9A%84if-else%E6%80%9D%E8%B7%AF/>利用策略模式和工厂模式优化代码中过多的if-else思路</a></li></ul></div></footer><link rel=stylesheet href=https://unpkg.com/@waline/client@v2/dist/waline.css><div id=waline></div><script type=module>
    import { init } from 'https://unpkg.com/@waline/client@v2/dist/waline.mjs';
    const locale = {
        nick: '昵称',
        nickError: '请填写昵称',
        mail: '邮箱',
        mailError: '请填写正确的邮件地址',
        link: '网址',
        optional: '可选',
        placeholder: '仅填写昵称即可发表回复。\n填写邮箱可收到回复提醒。\n评论区支持 Markdown 语法及预览。\n',
        sofa: '来发评论吧~',
        submit: '提交',
        like: '喜欢',
        cancelLike: '取消喜欢',
        reply: '回复',
        cancelReply: '取消回复',
        comment: '评论',
        refresh: '刷新',
        more: '加载更多...',
        preview: '预览',
        emoji: '表情',
        uploadImage: '上传图片',
        seconds: '秒前',
        minutes: '分钟前',
        hours: '小时前',
        days: '天前',
        now: '刚刚',
        uploading: '正在上传',
        login: '管理',
        logout: '退出',
        admin: '博主',
        sticky: '置顶',
        word: '字',
        wordHint: '评论字数应在 $0 到 $1 字之间！\n当前字数：$2',
        anonymous: '匿名',
        level0: '潜水',
        level1: '冒泡',
        level2: '吐槽',
        level3: '活跃',
        level4: '话痨',
        level5: '传说',
        gif: '表情包',
        gifSearchPlaceholder: '搜索表情包',
        profile: '个人资料',
        approved: '通过',
        waiting: '待审核',
        spam: '垃圾',
        unsticky: '取消置顶',
        oldest: '按倒序',
        latest: '按正序',
        hottest: '按热度',
        reactionTitle: '你认为这篇文章怎么样？',
    };
    init({
        
        el: '#waline',
        serverURL: 'https://blogcomments.luolin.online',
        locale,
        emoji: false,     
        search: false,    
        reaction: false,  
        requiredMeta: ['nick'],
        pageSize: 10,
        imageUploader: false,
        copyright: true,
        pageview: true,
        like: false,
    });
</script></article></main><footer class=footer><span>&copy; 2025 <a href=https://luolin1024.github.io>luolin1024</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span><div>本站总访问量 <span id=umami_value_site_pv></span> 次
本站总访客数 <span id=umami_value_site_uv></span> 人
当前在线访客 <span id=umami_value_active_uv></span> 人</div><a href="https://icp.gov.moe/?keyword=20248618" target=_blank>萌ICP备20248618号</a></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>